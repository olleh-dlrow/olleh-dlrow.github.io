

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Chen Shuwen">
  <meta name="keywords" content="">
  
    <meta name="description" content="MySQLJavaEE: 企业级Java开发 Web 前端（页面：展示数据）  后台（连接点：连接数据库JDBC，连接前端（控制视图跳转，和给前端传递数据）） 数据库（存数据，txt, excel, word… …） 初识MySQL数据库的重要性 大数据时代，得数据者得天下 存数据 数据库是所有软件体系最核心的存在  什么是数据库数据库（DB，DataBase） 概念：数据仓库，软件，安装在操作系">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL">
<meta property="og:url" content="http://example.com/2023/01/10/MySQL/index.html">
<meta property="og:site_name" content="Chen Shuwen&#39;s Tech Site">
<meta property="og:description" content="MySQLJavaEE: 企业级Java开发 Web 前端（页面：展示数据）  后台（连接点：连接数据库JDBC，连接前端（控制视图跳转，和给前端传递数据）） 数据库（存数据，txt, excel, word… …） 初识MySQL数据库的重要性 大数据时代，得数据者得天下 存数据 数据库是所有软件体系最核心的存在  什么是数据库数据库（DB，DataBase） 概念：数据仓库，软件，安装在操作系">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2023/01/10/MySQL/image-20200913194526770.png">
<meta property="og:image" content="http://example.com/2023/01/10/MySQL/image-20200914145307361.png">
<meta property="og:image" content="http://example.com/2023/01/10/MySQL/image-20200914145743635.png">
<meta property="og:image" content="http://example.com/2023/01/10/MySQL/image-20200914194621041.png">
<meta property="og:image" content="http://example.com/2023/01/10/MySQL/image-20200920191058689.png">
<meta property="og:image" content="http://example.com/2023/01/10/MySQL/image-20200920191421788.png">
<meta property="og:image" content="http://example.com/2023/01/10/MySQL/image-20201001133509760.png">
<meta property="og:image" content="http://example.com/2023/01/10/MySQL/image-20201001160431570.png">
<meta property="og:image" content="http://example.com/2023/01/10/MySQL/image-20201002111118497.png">
<meta property="og:image" content="http://example.com/2023/01/10/MySQL/image-20201002111425645.png">
<meta property="og:image" content="http://example.com/2023/01/10/MySQL/image-20201002173513965.png">
<meta property="og:image" content="http://example.com/2023/01/10/MySQL/image-20201002173726030.png">
<meta property="og:image" content="http://example.com/2023/01/10/MySQL/image-20201002173822608.png">
<meta property="og:image" content="http://example.com/2023/01/10/MySQL/image-20201002174038984.png">
<meta property="og:image" content="http://example.com/2023/01/10/MySQL/image-20201002174055364.png">
<meta property="article:published_time" content="2023-01-10T04:09:28.794Z">
<meta property="article:modified_time" content="2023-01-10T04:09:28.794Z">
<meta property="article:author" content="Chen Shuwen">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="SQL">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/2023/01/10/MySQL/image-20200913194526770.png">
  
  
  
  <title>MySQL - Chen Shuwen&#39;s Tech Site</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Chen Shuwen&#39;s Tech Site</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="MySQL"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-01-10 12:09" pubdate>
          2023年1月10日 中午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          36k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          302 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">MySQL</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><p>JavaEE: 企业级Java开发 Web</p>
<p>前端（页面：展示数据） </p>
<p>后台（连接点：连接数据库JDBC，连接前端（控制视图跳转，和给前端传递数据））</p>
<p>数据库（存数据，txt, excel, word… …）</p>
<h2 id="初识MySQL"><a href="#初识MySQL" class="headerlink" title="初识MySQL"></a>初识MySQL</h2><h3 id="数据库的重要性"><a href="#数据库的重要性" class="headerlink" title="数据库的重要性"></a>数据库的重要性</h3><ol>
<li>大数据时代，得数据者得天下</li>
<li>存数据</li>
<li><strong>数据库是所有软件体系最核心的存在</strong></li>
</ol>
<h3 id="什么是数据库"><a href="#什么是数据库" class="headerlink" title="什么是数据库"></a>什么是数据库</h3><p>数据库（DB，DataBase）</p>
<p>概念：数据仓库，<strong>软件</strong>，安装在操作系统（Windows，Linux，Mac）之上！SQL，可以存储大量的数据。500万！</p>
<p>作用：存储数据，管理数据</p>
<h3 id="数据库分类"><a href="#数据库分类" class="headerlink" title="数据库分类"></a>数据库分类</h3><p>关系型数据库：（SQL）</p>
<ul>
<li>MySQL，Oracle，Sql Server, DB2, SQLlite</li>
<li>通过表和表之间，行和列之间的关系进行数据的存储，  学员信息表，考勤表，… …</li>
</ul>
<p>非关系型数据库：（NoSQL）Not Only SQL</p>
<ul>
<li>Redis&#x2F;MongDB</li>
<li>非关系型数据库，对象存储，通过对象自身的属性来决定。</li>
</ul>
<p><strong>DBMS（数据库管理系统）</strong></p>
<ul>
<li>数据库的管理软件，科学有效地管理我们的数据。维护和获取数据；</li>
<li>MySQL</li>
</ul>
<p><img src="/2023/01/10/MySQL/image-20200913194526770.png" srcset="/img/loading.gif" lazyload alt="image-20200913194526770"></p>
<h3 id="MySQL简介"><a href="#MySQL简介" class="headerlink" title="MySQL简介"></a>MySQL简介</h3><p>MySQL是一个<strong>关系型数据库管理系统</strong></p>
<p>以前属于瑞典MySQL AB公司，在属于Oracle旗下产品。</p>
<p>MySQL是最好的RDBMS（Relational DataBase Management System）应用软件之一。</p>
<p>开源软件。</p>
<p>体积小、速度快、总体拥有成本低。</p>
<p>中小型网站，或者大型网站，可以集群。</p>
<p>官网：<a target="_blank" rel="noopener" href="https://www.mysql.com/">https://www.mysql.com/</a></p>
<h3 id="MySQL安装"><a href="#MySQL安装" class="headerlink" title="MySQL安装"></a>MySQL安装</h3><p>安装地址：<a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a></p>
<p>安装建议：</p>
<ol>
<li>尽量不要使用exe安装，会牵涉到注册表</li>
<li>尽可能使用压缩包安装</li>
</ol>
<br>

<p>步骤：</p>
<ol>
<li><p>解压zip</p>
</li>
<li><p>添加环境变量：在path中添加bin的目录</p>
</li>
<li><p>在mysql文件夹下新建my.ini文件</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[mysqld]</span><br><span class="hljs-attr">basedir</span>=D:\Program Files (x86)\mysql-<span class="hljs-number">8.0</span>.<span class="hljs-number">21</span>\<br><span class="hljs-attr">datadir</span>=D:\Program Files (x86)\mysql-<span class="hljs-number">8.0</span>.<span class="hljs-number">21</span>\data\<br><span class="hljs-attr">port</span>=<span class="hljs-number">3306</span><br><span class="hljs-comment">;skip-grant-tables</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>启动<strong>管理员模式</strong>下的CMD，并将路径切换至mysql下的bin目录，然后输入mysqld-install(安装mysql)。</p>
</li>
<li><p>再输入mysqld –initialize-insecure –user&#x3D;mysql 初始化数据文件。</p>
</li>
<li><p>然后再次启动mysql（使用net start mysql），然后用命令mysql -u root -p进入mysql管理页面</p>
</li>
<li><p>进入页面以后更改root密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ALTER USER <span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> IDENTIFIED WITH mysql_native_password BY <span class="hljs-string">&#x27;pwd&#x27;</span>;<br></code></pre></td></tr></table></figure>
</li>
<li><p>输入flush privileges; 刷新权限</p>
</li>
<li><p>重启mysql(net stop mysql, net start mysql)</p>
</li>
<li><p>启动 mysql -u root -p</p>
</li>
</ol>
<h3 id="安装SQLyog"><a href="#安装SQLyog" class="headerlink" title="安装SQLyog"></a>安装SQLyog</h3><ol>
<li><p>下载客户端后输入注册码</p>
</li>
<li><p>打开，连接数据库</p>
</li>
<li><p>新建一个数据库school</p>
</li>
<li><p>新建一张表student</p>
</li>
</ol>
<p><img src="/2023/01/10/MySQL/image-20200914145307361.png" srcset="/img/loading.gif" lazyload alt="image-20200914145307361"></p>
<p>每一个sqlyog操作本质就是对应一些命令</p>
<p><img src="/2023/01/10/MySQL/image-20200914145743635.png" srcset="/img/loading.gif" lazyload alt="image-20200914145743635"></p>
<p>然后保存</p>
<p>右键student打开表即可添加数据</p>
<h3 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql <span class="hljs-operator">-</span>uroot <span class="hljs-operator">-</span>p <span class="hljs-comment">--连接数据库</span><br>flush privileges;  <span class="hljs-comment">--刷新权限</span><br><span class="hljs-keyword">show</span> databases;   <span class="hljs-comment">--查询所有的数据库</span><br>use school; <span class="hljs-comment">--切换数据库</span><br><span class="hljs-keyword">show</span> tables;  <span class="hljs-comment">--查看所有表</span><br><span class="hljs-keyword">describe</span> student;  <span class="hljs-comment">--显示数据库中表的信息</span><br><span class="hljs-keyword">create</span> database westos;  <span class="hljs-comment">--创建一个数据库</span><br>exit; <span class="hljs-comment">--退出连接</span><br><span class="hljs-comment">-- --单行注释</span><br><span class="hljs-comment">/* 多行注释 */</span><br></code></pre></td></tr></table></figure>

<p><strong>数据库语言</strong>  CRUD增删改查</p>
<p>DML：操作</p>
<p>DDL：定义</p>
<p>DQL：查询</p>
<p>DCL：控制</p>
<h2 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h2><p>操作数据库-&gt; 操作数据库中的表-&gt; 操作数据库中表的数据</p>
<p>mySQL的关键字不区分大小写</p>
<h3 id="操作数据库-1"><a href="#操作数据库-1" class="headerlink" title="操作数据库"></a>操作数据库</h3><ol>
<li><p>创建数据库 </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE [IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span>] westos;<br></code></pre></td></tr></table></figure>
</li>
<li><p>删除数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> DATABASE IF <span class="hljs-keyword">EXISTS</span> westos<br></code></pre></td></tr></table></figure>
</li>
<li><p>使用数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- tab 键的上面，如果表名或者字段名是一个特殊字符，需要带``</span><br>USE `school`;<br></code></pre></td></tr></table></figure>
</li>
<li><p>查看数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> DATABASES;<br></code></pre></td></tr></table></figure></li>
</ol>
<h3 id="数据库的列类型"><a href="#数据库的列类型" class="headerlink" title="数据库的列类型"></a>数据库的列类型</h3><blockquote>
<p>数值</p>
</blockquote>
<ul>
<li>tinyint  十分小的数据   1字节</li>
<li>smallint  较小数据        2字节</li>
<li><strong>int                                   4字节</strong></li>
<li>mediumint 中等数据    3字节</li>
<li>bigint     较大数据          8字节</li>
<li>float                                4字节</li>
<li>double                            8字节（精度问题，计算机无法处理无限循环小数）</li>
<li>decimal   字符串形式浮点数   金融计算的时候，一般是使用decimal</li>
</ul>
<blockquote>
<p>字符串</p>
</blockquote>
<ul>
<li>char   字符串                  0~255</li>
<li><strong>varchar  可变字符串     0~65535</strong>  对应String类型，常用变量</li>
<li>tinytext   微型文本        $2^{8} - 1$ </li>
<li><strong>text           文本串           $2^{16} - 1$</strong>   保存大文本</li>
</ul>
<blockquote>
<p>时间日期</p>
</blockquote>
<p>java.util.Date</p>
<ul>
<li>date    YYYY-MM-DD，日期格式</li>
<li>time    HH:mm:ss         时间格式</li>
<li><strong>datetime  YYYY-MM-DD HH:mm:ss  最常用的时间格式</strong></li>
<li><strong>timestamp  时间戳  1970.1.1 到现在的毫秒数   也较为常用</strong></li>
<li>year      年份表示</li>
</ul>
<blockquote>
<p>null</p>
</blockquote>
<ul>
<li>没有值，未知</li>
<li>注意：不要使用null进行运算，结果为null</li>
</ul>
<h3 id="数据库的字段属性"><a href="#数据库的字段属性" class="headerlink" title="数据库的字段属性"></a>数据库的字段属性</h3><p>Unsigned：</p>
<ul>
<li>无符号整数</li>
<li>声明该列不能声明为负数</li>
</ul>
<p>Zerofill：</p>
<ul>
<li>0填充</li>
<li>不足的位数使用0来填充</li>
</ul>
<p>自增：</p>
<ul>
<li>自动在上一条的基础上+1(默认)</li>
<li>通常用来设计唯一的主键，必须是整数类型</li>
<li>可以自定义设计主键自增的起始值和步长</li>
</ul>
<p>非空：NULL not null</p>
<ul>
<li>假设设置为not null，如果不给它赋值就会报错</li>
<li>NULL，如果不填写值，默认就是NULL</li>
</ul>
<p>默认：</p>
<ul>
<li>设置默认值</li>
<li>sex，默认为男，如果不制定值，则为默认值</li>
</ul>
<h3 id="创建数据库表"><a href="#创建数据库表" class="headerlink" title="创建数据库表"></a>创建数据库表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `student` (<br>	`id` <span class="hljs-type">INT</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;学员id&#x27;</span>,<br>	`name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;匿名&#x27;</span> COMMENT <span class="hljs-string">&#x27;姓名&#x27;</span>,<br>	`pwd` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;123456&#x27;</span> COMMENT <span class="hljs-string">&#x27;密码&#x27;</span>,<br>	`sex` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;女&#x27;</span> COMMENT <span class="hljs-string">&#x27;性别&#x27;</span>,<br>	`birthday` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;出生日期&#x27;</span>,<br>	`address` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;家庭住址&#x27;</span>,<br>	`email` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;邮箱&#x27;</span>,<br>	<span class="hljs-comment">-- primary key加到最后面，一般一个表只有一个</span><br>	<span class="hljs-keyword">PRIMARY</span> KEY(`id`)<br>)ENGINE<span class="hljs-operator">=</span>INNODB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8<br></code></pre></td></tr></table></figure>

<p>格式</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span>] `<span class="hljs-keyword">table</span> name`(<br>	`<span class="hljs-type">char</span> name` col_type [attribute] [index] [comment],<br>    ...<br>	`<span class="hljs-type">char</span> name` col_type [attribute] [index] [comment]<br>)[table_type][charset][comment]<br></code></pre></td></tr></table></figure>

<p>常用命令</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">CREATE</span> DATABASE name  <span class="hljs-comment">-- 查看创建数据库的语句</span><br>... <span class="hljs-keyword">TABLE</span> name<br><span class="hljs-keyword">DESC</span> <span class="hljs-keyword">TABLE</span> name <span class="hljs-comment">--显示表的结构</span><br></code></pre></td></tr></table></figure>

<h3 id="数据表类型"><a href="#数据表类型" class="headerlink" title="数据表类型"></a>数据表类型</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 关于数据库的引擎</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">INNODB  默认使用</span><br><span class="hljs-comment">MYISAM  早些年使用</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th></th>
<th>MYISAM</th>
<th>INNODB</th>
</tr>
</thead>
<tbody><tr>
<td>事务支持</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>数据行锁定</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>外键约束</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>全文索引</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>表空间的大小</td>
<td>较小</td>
<td>较大，约为2倍</td>
</tr>
</tbody></table>
<p>常规使用操作：</p>
<ul>
<li>MYISAM 节约空间，速度较快</li>
<li>INNODB 安全性高，支持事务处理，多表多用户操作</li>
</ul>
<blockquote>
<p>在物理空间存在的位置</p>
</blockquote>
<p>所有的数据库文件都存在data目录下，一个文件夹对应一个数据库</p>
<p>本质还是文件存储</p>
<blockquote>
<p>设置数据库表的字符集编码</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">CHARSET<span class="hljs-operator">=</span>utf8<br></code></pre></td></tr></table></figure>

<p>不设置的话，会使用mysql默认的字符集编码~</p>
<p>MySQL默认编码是Latin1，不支持中文</p>
<p>在my.ini中配置默认的编码</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">character-set-server</span>=utf8<br></code></pre></td></tr></table></figure>

<h3 id="修改删除表"><a href="#修改删除表" class="headerlink" title="修改删除表"></a>修改删除表</h3><blockquote>
<p>修改</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 修改表名</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> student RENAME <span class="hljs-keyword">AS</span> teacher<br><span class="hljs-comment">-- 增加表的字段</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `teacher` <span class="hljs-keyword">ADD</span> `age` <span class="hljs-type">INT</span>(<span class="hljs-number">11</span>)<br><span class="hljs-comment">-- 修改表的字段</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `teacher` MODIFY age <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>)   <span class="hljs-comment">-- 修改约束</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `teacher` CHANGE age age1 <span class="hljs-type">INT</span>(<span class="hljs-number">1</span>)   <span class="hljs-comment">-- 字段重命名</span><br><span class="hljs-comment">-- 删除表的字段</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `teacher` <span class="hljs-keyword">DROP</span> age1<br></code></pre></td></tr></table></figure>

<blockquote>
<p>删除</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 删除表</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> [iF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span>] `teacher`<br></code></pre></td></tr></table></figure>

<p><strong>所有创建和删除的操作尽量加上判断，以免报错</strong></p>
<p>注意点：</p>
<ul>
<li>所有字段名尽量用&#96;&#96;包裹起来</li>
<li>注释 – 、&#x2F;**&#x2F;</li>
<li>sql 关键字大小写不敏感，建议小写</li>
<li>所有符号用英文</li>
</ul>
<h2 id="MySQL数据管理"><a href="#MySQL数据管理" class="headerlink" title="MySQL数据管理"></a>MySQL数据管理</h2><h3 id="外键"><a href="#外键" class="headerlink" title="外键"></a>外键</h3><p><img src="/2023/01/10/MySQL/image-20200914194621041.png" srcset="/img/loading.gif" lazyload alt="image-20200914194621041"></p>
<blockquote>
<p>方式1：在创建表的时候，增加约束（比较复杂）</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `grade`(<br>	`gradeid` <span class="hljs-type">INT</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;年级id&#x27;</span>,<br>	`gradename` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;年级名称&#x27;</span>,<br>	<span class="hljs-keyword">PRIMARY</span> KEY(`gradeid`)<br>)ENGINE<span class="hljs-operator">=</span>INNODB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8<br><br><span class="hljs-comment">-- 学生表的gradeid字段需要引用年级表的gradeid</span><br><span class="hljs-comment">-- 定义外键key</span><br><span class="hljs-comment">-- 给这个外键添加约束（执行引用）</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `student` (<br>	`id` <span class="hljs-type">INT</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;学员id&#x27;</span>,<br>	`name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;匿名&#x27;</span> COMMENT <span class="hljs-string">&#x27;姓名&#x27;</span>,<br>	`pwd` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;123456&#x27;</span> COMMENT <span class="hljs-string">&#x27;密码&#x27;</span>,<br>	`sex` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;女&#x27;</span> COMMENT <span class="hljs-string">&#x27;性别&#x27;</span>,<br>	`birthday` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;出生日期&#x27;</span>,<br>	`gradeid` <span class="hljs-type">INT</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;学生年级&#x27;</span>,<br>	`address` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;家庭住址&#x27;</span>,<br>	`email` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;邮箱&#x27;</span>,<br>	<span class="hljs-comment">-- primary key加到最 后面，一般一个表只有一个</span><br>	<span class="hljs-keyword">PRIMARY</span> KEY(`id`),<br>	KEY `FK_gradeid` (`gradeid`),  <span class="hljs-comment">-- 打算作为外键</span><br>	<span class="hljs-keyword">CONSTRAINT</span> `FK_gradeid` <span class="hljs-keyword">FOREIGN</span> KEY (`gradeid`) <span class="hljs-keyword">REFERENCES</span> `grade` (`gradeid`)<br>)ENGINE<span class="hljs-operator">=</span>INNODB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8<br></code></pre></td></tr></table></figure>

<p>删除有外键关系的表的时候，必须先删除引用别人的表（从表），再删除被引用的表（主表）</p>
<blockquote>
<p>方式2：添加表成功后，再添加外键约束</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 创建表时没有外键关系</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `student`<br><span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> `FK_gradeid` <span class="hljs-keyword">FOREIGN</span> KEY (`gradeid`) <span class="hljs-keyword">REFERENCES</span> `grade` (`gradeid`);<br><br><span class="hljs-comment">-- alter table 表 add constraint 约束名 foreign key （作为外键的列） references 被引用的表（被引用的字段）</span><br></code></pre></td></tr></table></figure>

<p>以上操作都是物理外键，数据库级别的外键，不建议使用！避免数据库过多造成困扰，这里了解即可</p>
<p><strong>最佳实现：</strong></p>
<ul>
<li>数据库就是单纯的表，只用来存数据，只有行（数据）和列（字段）</li>
<li>我们想使用多张表的数据，想使用外键（程序去实现）</li>
</ul>
<h3 id="DML语言"><a href="#DML语言" class="headerlink" title="DML语言"></a>DML语言</h3><p><strong>数据库意义：</strong>数据存储，数据管理</p>
<p>DML语言：数据操作语言</p>
<ul>
<li>insert</li>
<li>update</li>
<li>delete</li>
</ul>
<h3 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 插入语句（添加）</span><br><span class="hljs-comment">-- insert into 表名 （[字段名1， 字段2 ...])（相当于构造参数） values(&#x27;值1’), (&#x27;值2&#x27;), (&#x27;值3&#x27;)...（相当于对象）</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `grade`(`gradename`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-string">&#x27;大四&#x27;</span>)<br><br><span class="hljs-comment">-- 由于主键自增，可以省略主键（如果不写表的字段，就会一一匹配）</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `grade` <span class="hljs-keyword">VALUES</span>(<span class="hljs-string">&#x27;大三&#x27;</span>)  <span class="hljs-comment">-- 错误，因为会默认插入到gradeid中</span><br><br><span class="hljs-comment">-- 一般写插入语句，需要数据和字段一一对应!</span><br><span class="hljs-comment">-- 插入多个字段</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `grade`<br>(`gradename`)<br><span class="hljs-keyword">VALUES</span>(<span class="hljs-string">&#x27;大一&#x27;</span>),(<span class="hljs-string">&#x27;大二&#x27;</span>),(<span class="hljs-string">&#x27;大三&#x27;</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `student`<br>(`name`,`pwd`)<br><span class="hljs-keyword">VALUES</span><br>(<span class="hljs-string">&#x27;张三&#x27;</span>,<span class="hljs-string">&#x27;123456&#x27;</span>),<br>(<span class="hljs-string">&#x27;李四&#x27;</span>,<span class="hljs-string">&#x27;345678&#x27;</span>);<br></code></pre></td></tr></table></figure>

<p>注意事项：</p>
<ol>
<li>字段和字段之间使用英文逗号隔开</li>
<li>字段可以省略，但是值必须一一对应（不建议，容易出错）</li>
<li>可以同时插入多条数据，VALUES后面的值需要使用逗号隔开</li>
</ol>
<h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><blockquote>
<p>update 修改对象（条件）  set原来的值 -&gt; 新值</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 修改学员的名字</span><br><span class="hljs-comment">-- 带了条件</span><br><span class="hljs-keyword">UPDATE</span> `student`<br><span class="hljs-keyword">SET</span> `name`<span class="hljs-operator">=</span><span class="hljs-string">&#x27;shuwen&#x27;</span><br><span class="hljs-keyword">WHERE</span> `id`<span class="hljs-operator">=</span><span class="hljs-number">1</span>;<br><br><span class="hljs-comment">-- 不制定条件的情况下，会改动所有的表!</span><br><span class="hljs-keyword">UPDATE</span> `student`<br><span class="hljs-keyword">SET</span> `name`<span class="hljs-operator">=</span><span class="hljs-string">&#x27;Apocalypse&#x27;</span>;<br><br><span class="hljs-comment">-- 修改多个属性</span><br><span class="hljs-keyword">UPDATE</span> `student`<br><span class="hljs-keyword">SET</span> `name`<span class="hljs-operator">=</span><span class="hljs-string">&#x27;chen&#x27;</span>, `email`<span class="hljs-operator">=</span><span class="hljs-string">&#x27;1136@qq.com&#x27;</span><br><span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-number">1</span>;<br><br><span class="hljs-comment">-- 语法</span><br><span class="hljs-comment">-- update 表名 set column_name = value,[column_name=value,...] where 条件</span><br></code></pre></td></tr></table></figure>

<p>条件：where子句 运算符 id 等于，大于，小于某个值，在某个区间内修改… …</p>
<p>操作符会返回boolean值</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>意义</th>
<th>范围</th>
<th>结果</th>
</tr>
</thead>
<tbody><tr>
<td>&#x3D;</td>
<td>等于</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;&gt; 或 !&#x3D;</td>
<td>不等于</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&gt;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&gt;&#x3D;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;&#x3D;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>BETWEEN … AND …</td>
<td>闭区间[x,y]</td>
<td>BETWEEN id&#x3D;2 AND id&#x3D;5</td>
<td></td>
</tr>
<tr>
<td>AND</td>
<td>相当于&amp;&amp;</td>
<td>5&gt;1 and 1&gt;2</td>
<td>false</td>
</tr>
<tr>
<td>OR</td>
<td>相当于||</td>
<td>5&gt;1 or 1&gt;2</td>
<td>true</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 通过多个条件定位数据, 无上限</span><br><span class="hljs-keyword">UPDATE</span> `student`<br><span class="hljs-keyword">SET</span> `name`<span class="hljs-operator">=</span><span class="hljs-string">&#x27;hao&#x27;</span><br><span class="hljs-keyword">WHERE</span> `name`<span class="hljs-operator">=</span><span class="hljs-string">&#x27;shuwen&#x27;</span> <span class="hljs-keyword">AND</span> id<span class="hljs-operator">=</span><span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li><p>使用column列尽量带上&#96;&#96;</p>
</li>
<li><p>筛选条件，如果没有指定则会修改所有的列</p>
</li>
<li><p>value是一个具体的值，也可以是一个变量</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 可以设置值为某个变量</span><br><span class="hljs-keyword">UPDATE</span> `student`<br><span class="hljs-keyword">SET</span> `birthday`<span class="hljs-operator">=</span><span class="hljs-built_in">CURRENT_TIME</span><br><span class="hljs-keyword">WHERE</span> `name`<span class="hljs-operator">=</span><span class="hljs-string">&#x27;hao&#x27;</span>;<br></code></pre></td></tr></table></figure>
</li>
<li><p>多个设置的属性之间使用英文逗号隔开</p>
</li>
</ul>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><blockquote>
<p>delete命令</p>
</blockquote>
<p>语法：delete from 表名 [where 条件]</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 删除指定数据</span><br><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> `student` <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-number">1</span>;<br><br><span class="hljs-comment">-- 切忌！</span><br><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> `student` <span class="hljs-comment">-- 会删除整张表</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>TRUNCATE 命令</p>
</blockquote>
<p>  作用：完全清空一个数据库表，表的结果和索引约束不会变!</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 清空 student 表</span><br><span class="hljs-keyword">TRUNCATE</span> `student`;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>delete 和truncate的区别：</p>
</blockquote>
<ul>
<li><p>相同点：都能删除数据，都不会删除表结构</p>
</li>
<li><p>不同点：</p>
<ul>
<li><p>truncate命令会重新设置自增列，计数器会归零</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 不会影响自增</span><br><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> `test`;<br><br><span class="hljs-comment">-- 会重置自增，归零</span><br><span class="hljs-keyword">TRUNCATE</span> <span class="hljs-keyword">TABLE</span> `test`;<br></code></pre></td></tr></table></figure>
</li>
<li><p>truncate不会影响事务</p>
</li>
</ul>
</li>
</ul>
<p>delete删除的问题：重启数据库，会发生现象：</p>
<ul>
<li>INNODB 自增列会从1开始，(存在内存当中，断点即失)</li>
<li>MyISAM 继续从上一个自增量开始 (存在文件中，不会丢失)</li>
</ul>
<h2 id="DQL查询数据"><a href="#DQL查询数据" class="headerlink" title="DQL查询数据"></a>DQL查询数据</h2><h3 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h3><p>（Data Query Language: 数据查询语言）</p>
<ul>
<li>所有的查询操作都使用它 Select</li>
<li>简单的查询，复杂的查询都能做</li>
<li>数据库中最核心的语言</li>
<li>使用频率最高</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> [<span class="hljs-keyword">ALL</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">DISTINCT</span>]<br>&#123;<span class="hljs-operator">*</span> <span class="hljs-operator">|</span>table.<span class="hljs-operator">*</span> <span class="hljs-operator">|</span> [table.field1[<span class="hljs-keyword">as</span> alias1][,table.field2[<span class="hljs-keyword">as</span> alias2]][,...]]&#125;<br><span class="hljs-keyword">FROM</span> table_name [<span class="hljs-keyword">as</span> table_alias]<br>	[<span class="hljs-keyword">left</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">right</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> table_name2] <span class="hljs-comment">-- 联合查询</span><br>	[<span class="hljs-keyword">where</span> ...]  <span class="hljs-comment">--指定结果需要满足的条件</span><br>	[<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> ...] <span class="hljs-comment">-- 指定结果按照哪几个字段来分组</span><br>	[<span class="hljs-keyword">having</span> ...] <span class="hljs-comment">-- 过滤分组的记录必须满足的次要条件</span><br>	[<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> ...] <span class="hljs-comment">-- 指定查询记录按照一个或者多个条件排序</span><br>	[limit &#123;[<span class="hljs-keyword">offset</span>,]row_count <span class="hljs-operator">|</span> row_countOFFSET <span class="hljs-keyword">offset</span>&#125;];<br>	<span class="hljs-comment">-- 指定查询的记录从哪条至哪条</span><br></code></pre></td></tr></table></figure>

<p>顺序很重要：</p>
<p>select 去重 查询的字段（主义：表和字段可以取别名）</p>
<p>xx join 要连接的表 on 等值判断</p>
<p>where (具体的值， 子查询语句)</p>
<p>group by(通过哪个字段来分组)</p>
<p>having （过滤分组后的信息，条件和where一样，位置不同）</p>
<p>order by（通过哪个字段排序）[升序&#x2F;降序]</p>
<p>limit startindex, pagesize</p>
<p>查询：跨表，跨数据库</p>
<h3 id="指定查询字段"><a href="#指定查询字段" class="headerlink" title="指定查询字段"></a>指定查询字段</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查询所有字段   SELECT 字段 FROM 表</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> student<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">result</span><br><br><span class="hljs-comment">-- 查询指定字段</span><br><span class="hljs-keyword">SELECT</span> `studentno`,`studentname` <span class="hljs-keyword">FROM</span> student<br><br><span class="hljs-comment">-- 别名，给结果起一个名字 AS，也可以给字段起别名，也可以给表起别名</span><br><span class="hljs-keyword">SELECT</span> `studentno` <span class="hljs-keyword">AS</span> 学号,`studentname` <span class="hljs-keyword">AS</span> 姓名 <span class="hljs-keyword">FROM</span> student<br><br><span class="hljs-comment">-- 函数 concat(a, b)</span><br><span class="hljs-keyword">SELECT</span> CONCAT(<span class="hljs-string">&#x27;姓名:&#x27;</span>,studentname) <span class="hljs-keyword">AS</span> 新名字 <span class="hljs-keyword">FROM</span> student<br></code></pre></td></tr></table></figure>

<p>语法：select 字段1,… from 表</p>
<blockquote>
<p>有的时候，列名字不是那么见名知意，可以其别名 AS 字段名 as 别名; 表名 as 别名</p>
</blockquote>
<blockquote>
<p>去重 distinct</p>
</blockquote>
<p>作用：去除SELECT查询出来的结果中重复的数据，重复的数据只显示一条</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查询一下有哪些同学有成绩</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">result</span>  <span class="hljs-comment">-- 查询全部的考试成绩</span><br><span class="hljs-keyword">SELECT</span> `studentno` <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">result</span><br><span class="hljs-comment">-- 需要去重</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> `studentno` <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">result</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>数据库的列（表达式）</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查询系统的版本</span><br><span class="hljs-keyword">SELECT</span> VERSION()  <span class="hljs-comment">-- 函数</span><br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-number">100</span><span class="hljs-operator">*</span><span class="hljs-number">3</span><span class="hljs-number">-1</span> <span class="hljs-keyword">AS</span> 计算结果  <span class="hljs-comment">-- 计算表达式</span><br><br><span class="hljs-keyword">SELECT</span> @<span class="hljs-variable">@auto</span>_increment_increment  <span class="hljs-comment">-- 查询自增的步长（变量）</span><br><br><span class="hljs-comment">-- 学员考试成绩+1分</span><br><span class="hljs-keyword">SELECT</span> `studentno`,`studentresult`<span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">AS</span> 提分后 <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">result</span><br></code></pre></td></tr></table></figure>

<p>数据库中的表达式：文本的值，列，NULL，函数，计算表达式… …</p>
<p>select 表达式 from 表</p>
<h3 id="where条件子句"><a href="#where条件子句" class="headerlink" title="where条件子句"></a>where条件子句</h3><p>作用：检索数据中符合条件的值</p>
<p>搜索的条件由一个或者多个表达式组成</p>
<blockquote>
<p>逻辑运算符</p>
</blockquote>
<p>与或非</p>
<p>and &amp;&amp;</p>
<p>or ||</p>
<p>Not !</p>
<p>尽量使用英文字母</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查询考试成绩在90-120之间</span><br><span class="hljs-keyword">SELECT</span> `studentno`,`studentresult` <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">result</span><br><span class="hljs-keyword">WHERE</span> `studentresult` <span class="hljs-operator">&gt;=</span> <span class="hljs-number">90</span> <span class="hljs-keyword">AND</span> `studentresult` <span class="hljs-operator">&lt;=</span> <span class="hljs-number">120</span><br><br><span class="hljs-comment">-- 模糊查询</span><br><span class="hljs-keyword">SELECT</span> `studentno`,`studentresult` <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">result</span><br><span class="hljs-keyword">WHERE</span> `studentresult` <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">95</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">120</span><br><br><span class="hljs-comment">-- 除了1000号学生之外的成绩</span><br><span class="hljs-keyword">SELECT</span> `studentno`,`studentresult` <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">result</span><br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">NOT</span> `studentno`<span class="hljs-operator">=</span><span class="hljs-number">1000</span><br><span class="hljs-comment">-- where `studentno` != 1000</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>模糊查询：比较运算符</p>
</blockquote>
<table>
<thead>
<tr>
<th>运算符</th>
<th>语法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>IS NULL</td>
<td>a is null</td>
<td>如果操作符为null,则结果为真</td>
</tr>
<tr>
<td>IS NOT NULL</td>
<td>a is not null</td>
<td>如果操作符不为null，则结果为真</td>
</tr>
<tr>
<td>BETWEEN… AND…</td>
<td>a between b and c</td>
<td>a 在 b 和 c之间则返回真</td>
</tr>
<tr>
<td><strong>Like</strong></td>
<td>A LIke b</td>
<td>SQL匹配：如果a能够匹配到b，结果为真</td>
</tr>
<tr>
<td><strong>In</strong></td>
<td>a in (a1,a2,a3… )</td>
<td>假设a在a1,a2,a3…其中的某一个值中，则结果为真</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 模糊查询</span><br><span class="hljs-keyword">SELECT</span> `studentno`,`studentresult` <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">result</span><br><span class="hljs-keyword">WHERE</span> `studentresult` <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">95</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">120</span><br><br><span class="hljs-comment">-- 除了1000号学生之外的成绩</span><br><span class="hljs-keyword">SELECT</span> `studentno`,`studentresult` <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">result</span><br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">NOT</span> `studentno`<span class="hljs-operator">=</span><span class="hljs-number">1000</span><br><span class="hljs-comment">-- where `studentno` != 1000</span><br><br><span class="hljs-comment">-- 查询姓刘的同学</span><br><span class="hljs-comment">-- like结合 %(0到任意个字符) _（一个字符）</span><br><span class="hljs-keyword">SELECT</span> `studentno`,`studentname` <span class="hljs-keyword">FROM</span> student<br><span class="hljs-keyword">WHERE</span> `studentname` <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;刘%&#x27;</span><br><br><span class="hljs-comment">-- 查询姓刘的同学，名字后面只有一个字</span><br><span class="hljs-keyword">SELECT</span> `studentno`,`studentname` <span class="hljs-keyword">FROM</span> student<br><span class="hljs-keyword">WHERE</span> `studentname` <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;刘_&#x27;</span><br><br><span class="hljs-comment">-- 查询名字当中有伟字的同学</span><br><span class="hljs-keyword">SELECT</span> `studentno`,`studentname` <span class="hljs-keyword">FROM</span> student<br><span class="hljs-keyword">WHERE</span> `studentname` <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;%伟%&#x27;</span><br><br><span class="hljs-comment">-- in（具体是一个或者多个值） 查询1001,1002,1003号学员信息</span><br><span class="hljs-keyword">SELECT</span> `studentno`,`studentname` <span class="hljs-keyword">FROM</span> student<br><span class="hljs-keyword">WHERE</span> `studentno` <span class="hljs-keyword">IN</span> (<span class="hljs-number">1001</span>,<span class="hljs-number">1002</span>,<span class="hljs-number">1003</span>);<br><br><span class="hljs-comment">-- 查询在北京的学生</span><br><span class="hljs-keyword">SELECT</span> `studentno`,`studentname` <span class="hljs-keyword">FROM</span> student<br><span class="hljs-keyword">WHERE</span> `address` <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;%湖北%&#x27;</span>;<br><br><span class="hljs-keyword">SELECT</span> `studentno`,`studentname` <span class="hljs-keyword">FROM</span> student<br><span class="hljs-keyword">WHERE</span> `address`<span class="hljs-operator">=</span><span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">OR</span> address <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>;<br><br><span class="hljs-comment">-- 查询有出生日期的同学</span><br><span class="hljs-keyword">SELECT</span> `studentno`,`studentname` <span class="hljs-keyword">FROM</span> student<br><span class="hljs-keyword">WHERE</span>  `borndate` <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>;<br></code></pre></td></tr></table></figure>

<h3 id="联表查询"><a href="#联表查询" class="headerlink" title="联表查询"></a>联表查询</h3><blockquote>
<p>JOIN 对比</p>
</blockquote>
<p><img src="/2023/01/10/MySQL/image-20200920191058689.png" srcset="/img/loading.gif" lazyload alt="image-20200920191058689"></p>
<p><img src="/2023/01/10/MySQL/image-20200920191421788.png" srcset="/img/loading.gif" lazyload alt="image-20200920191421788"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 联表查询<br>-- 查询参加了考试的同学（学号，姓名，科目编号，分数）<br>SELECT * FROM student<br>SELECT * FROM result<br><br>/*<br>思路：<br>1.需求：分析查询的字段来自哪些表，（连接查询）<br>2.确定使用哪种连接查询？7种<br>3.确定一个交叉点（这两个表中哪个数据是相同的）<br>判断的条件：学生表中的studentno = 成绩表中的studentno<br>*/<br><br>-- join（连接的表） on（判断条件） 连接查询<br>-- where 等值查询<br><br><br>SELECT s.studentno, studentname, subjectno, studentresult<br>FROM student AS s<br>INNER JOIN result AS r<br>WHERE s.studentno = r.studentno<br><br>-- Right Join<br>SELECT s.studentno, studentname, subjectno, studentresult<br>FROM student AS s<br>RIGHT JOIN result AS r<br>ON s.studentno = r.studentno<br><br>SELECT s.studentno, studentname, subjectno, studentresult<br>FROM student AS s<br>LEFT JOIN result AS r<br>ON s.studentno = r.studentno<br>WHERE studentresult IS NULL<br><br>-- 查询了参加的考试的同学信息：学号，学生姓名，科目名称，分数<br>/*<br>思路：<br>1.需求：分析查询的字段来自哪些表，student, result, subject（连接查询）<br>2.确定使用哪种连接查询？7种<br>3.确定一个交叉点（这两个表中哪个数据是相同的） <br>判断的条件：学生表中的studentno = 成绩表中的studentno<br>*/<br><br>SELECT s.studentno, studentname, subjectname, studentresult<br>FROM student s<br>RIGHT JOIN result r<br>ON r.studentno = s.studentno<br>INNER JOIN `subject` sub<br>ON r.subjectno = sub.subjectno<br><br>-- 我要查询哪些数据 select ...<br>-- 从哪几个表中查 from 表 xxx join 表<br>-- on 交叉条件<br>-- 假设存在一种多张表查询，先查询两张表，然后再慢慢增加<br><br>-- from A left join B<br>-- from B right join A<br></code></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>操作</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>inner join</td>
<td>如果表中至少有一个匹配，就返回行</td>
</tr>
<tr>
<td>left join</td>
<td>即使右表中没有匹配，也会从左表中返回对应的值</td>
</tr>
<tr>
<td>right join</td>
<td>和left join相反</td>
</tr>
</tbody></table>
<blockquote>
<p>自连接</p>
</blockquote>
<p> 自己的表和自己的表连接，核心：一张表拆为两张一样的表即可</p>
<p>示例表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `category`(<br>	`categoryid` <span class="hljs-type">INT</span>(<span class="hljs-number">10</span>) UNSIGNED <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT	<span class="hljs-string">&#x27;主题id&#x27;</span>,<br>	`pid` <span class="hljs-type">INT</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;父id&#x27;</span>,<br>	`categoryName` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;主题名字&#x27;</span>,<br>	<span class="hljs-keyword">PRIMARY</span> KEY(`categoryid`)<br>)ENGINE<span class="hljs-operator">=</span>INNODB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">9</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `category` (`categoryid`, `pid`, `categoryName`)<br><span class="hljs-keyword">VALUES</span>(<span class="hljs-string">&#x27;2&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;信息技术&#x27;</span>),<br>(<span class="hljs-string">&#x27;3&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;软件开发&#x27;</span>),<br>(<span class="hljs-string">&#x27;4&#x27;</span>,<span class="hljs-string">&#x27;3&#x27;</span>,<span class="hljs-string">&#x27;数据库&#x27;</span>),<br>(<span class="hljs-string">&#x27;5&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;美术设计&#x27;</span>),<br>(<span class="hljs-string">&#x27;6&#x27;</span>,<span class="hljs-string">&#x27;3&#x27;</span>,<span class="hljs-string">&#x27;web开发&#x27;</span>),<br>(<span class="hljs-string">&#x27;7&#x27;</span>,<span class="hljs-string">&#x27;5&#x27;</span>,<span class="hljs-string">&#x27;ps技术&#x27;</span>),<br>(<span class="hljs-string">&#x27;8&#x27;</span>,<span class="hljs-string">&#x27;2&#x27;</span>,<span class="hljs-string">&#x27;办公信息&#x27;</span>);<br></code></pre></td></tr></table></figure>



<p>父类</p>
<table>
<thead>
<tr>
<th>categoryid</th>
<th>categoryName</th>
</tr>
</thead>
<tbody><tr>
<td>2</td>
<td>信息技术</td>
</tr>
<tr>
<td>3</td>
<td>软件开发</td>
</tr>
<tr>
<td>5</td>
<td>美术设计</td>
</tr>
</tbody></table>
<p>子类</p>
<table>
<thead>
<tr>
<th>pid</th>
<th>categoryid</th>
<th>categoryName</th>
</tr>
</thead>
<tbody><tr>
<td>3</td>
<td>4</td>
<td>数据库</td>
</tr>
<tr>
<td>2</td>
<td>8</td>
<td>办公信息</td>
</tr>
<tr>
<td>3</td>
<td>6</td>
<td>web开发</td>
</tr>
<tr>
<td>5</td>
<td>7</td>
<td>美术设计</td>
</tr>
</tbody></table>
<p>操作：查询父类对应的子类关系</p>
<table>
<thead>
<tr>
<th>父类</th>
<th>子类</th>
</tr>
</thead>
<tbody><tr>
<td>信息技术</td>
<td>办公信息</td>
</tr>
<tr>
<td>软件开发</td>
<td>数据库</td>
</tr>
<tr>
<td>软件开发</td>
<td>web开发</td>
</tr>
<tr>
<td>美术设计</td>
<td>ps技术</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查询父类信息:把一张表分成两张一模一样的表</span><br><span class="hljs-keyword">SELECT</span> a.categoryName <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;父栏目&#x27;</span>, b.categoryName <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;子栏目&#x27;</span><br><span class="hljs-keyword">FROM</span> category <span class="hljs-keyword">AS</span> a, category <span class="hljs-keyword">AS</span> b<br><span class="hljs-keyword">WHERE</span> a.`categoryid` <span class="hljs-operator">=</span> b.`pid`<br></code></pre></td></tr></table></figure>



<h3 id="分页和排序"><a href="#分页和排序" class="headerlink" title="分页和排序"></a>分页和排序</h3><blockquote>
<p>排序</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 分页和排序 limit order by</span><br><span class="hljs-comment">-- 排序：升序ASC，降序DESC</span><br><span class="hljs-comment">-- order by 通过哪个字段排序，怎么排</span><br><br><span class="hljs-comment">-- 查询的结果根据成绩降序排序</span><br><span class="hljs-keyword">SELECT</span> s.studentno, studentname, subjectname, studentresult<br><span class="hljs-keyword">FROM</span> student s<br><span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> `<span class="hljs-keyword">result</span>` r<br><span class="hljs-keyword">ON</span> s.studentno <span class="hljs-operator">=</span> r.studentno<br><span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> `subject` sub<br><span class="hljs-keyword">ON</span> r.subjectno <span class="hljs-operator">=</span> sub.subjectno<br><span class="hljs-keyword">WHERE</span> subjectname <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;高等数学-1&#x27;</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> studentresult <span class="hljs-keyword">ASC</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>分页</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 100万数据无法直接显示在前端</span><br><span class="hljs-comment">-- 分页的原因</span><br><span class="hljs-comment">-- 缓解数据压力，但也可以使用瀑布流（如百度图片）</span><br><span class="hljs-comment">-- 每页只显示5条数据</span><br><span class="hljs-comment">-- limit 起始位置, 页面的大小</span><br><span class="hljs-comment">-- limit 0,5 1~5</span><br><span class="hljs-comment">-- limit 1,5 2~6</span><br><span class="hljs-comment">-- limit 6,5 7~11</span><br><span class="hljs-comment">-- 网页应用：当前，总页数，页面的大小</span><br><span class="hljs-comment">-- 第一页 limit 0,5</span><br><span class="hljs-comment">-- 第二页 limit 5,5</span><br><span class="hljs-comment">-- 第三页 limit 10,5</span><br><span class="hljs-comment">-- 第n页 limit 5n-5, 5 (n-1)*pageSize, pageSize</span><br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> `subject`<br>LIMIT <span class="hljs-number">6</span>,<span class="hljs-number">5</span><br></code></pre></td></tr></table></figure>

<p>语法：limit (查询起始下标，pageSize)</p>
<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p>where (这个值是计算出来的)</p>
<p>本质：在where语句中嵌套一个子查询语句</p>
<p>where(select * from )</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 1.查询 高等数学-1 的所有考试结果 （学号，科目编号， 成绩），降序排列</span><br><span class="hljs-comment">-- 方式一：使用连接查询</span><br><span class="hljs-keyword">SELECT</span> studentno, r.subjectno, studentresult<br><span class="hljs-keyword">FROM</span> <span class="hljs-keyword">result</span> r<br><span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> `subject` sub<br><span class="hljs-keyword">ON</span> r.subjectno <span class="hljs-operator">=</span> sub.subjectno<br><span class="hljs-keyword">WHERE</span> subjectname <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;高等数学-1&#x27;</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> studentresult <span class="hljs-keyword">DESC</span><br><br><span class="hljs-comment">-- 方式二：使用子查询(由里及外)</span><br><span class="hljs-keyword">SELECT</span> studentno, subjectno, studentresult<br><span class="hljs-keyword">FROM</span> <span class="hljs-keyword">result</span><br><span class="hljs-keyword">WHERE</span> subjectno <span class="hljs-operator">=</span> (<span class="hljs-keyword">SELECT</span> subjectno <span class="hljs-keyword">FROM</span> `subject` <span class="hljs-keyword">WHERE</span> subjectname <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;高等数学-1&#x27;</span>)<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> studentresult <span class="hljs-keyword">DESC</span><br><br><span class="hljs-comment">-- 查询分数不小于80的学生的学号和姓名，高等数学-2</span><br><span class="hljs-comment">-- 查询高等数学-2 的编号</span><br><span class="hljs-keyword">SELECT</span> studentname, s.studentno, studentresult<br><span class="hljs-keyword">FROM</span> student s<br><span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> <span class="hljs-keyword">result</span> r<br><span class="hljs-keyword">ON</span> s.studentno <span class="hljs-operator">=</span> r.studentno<br><span class="hljs-keyword">WHERE</span> r.studentresult <span class="hljs-operator">&gt;=</span> <span class="hljs-number">80</span> <span class="hljs-keyword">AND</span> subjectno <span class="hljs-operator">=</span> (<br>	<span class="hljs-keyword">SELECT</span> subjectno <span class="hljs-keyword">FROM</span> `subject`<br>	<span class="hljs-keyword">WHERE</span> subjectname <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;高等数学-2&#x27;</span><br>)<br><br><span class="hljs-comment">-- 查询所有高等数学-1 的学生学号</span><br></code></pre></td></tr></table></figure>

<p>嵌套查询</p>
<p>在子查询语句里面再嵌套一层子查询语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 再改造</span><br><span class="hljs-keyword">SELECT</span> studentno, studentname<br><span class="hljs-keyword">FROM</span> student s<br><span class="hljs-comment">-- 如果查询的结果不唯一，则使用in</span><br><span class="hljs-keyword">WHERE</span> studentno <span class="hljs-keyword">IN</span> (<br>	<span class="hljs-keyword">SELECT</span> studentno <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">result</span> <span class="hljs-keyword">WHERE</span> studentresult <span class="hljs-operator">&gt;=</span> <span class="hljs-number">80</span><br>	<span class="hljs-keyword">AND</span><br>	subjectno <span class="hljs-operator">=</span> (<br>		<span class="hljs-keyword">SELECT</span> subjectno <span class="hljs-keyword">FROM</span> `subject` <span class="hljs-keyword">WHERE</span> subjectname <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;高等数学-2&#x27;</span><br>	)<br>)<br></code></pre></td></tr></table></figure>

<h3 id="分组和过滤"><a href="#分组和过滤" class="headerlink" title="分组和过滤"></a>分组和过滤</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查询不同课程的平均分，最高分，最低分，平均分大于80</span><br><span class="hljs-comment">-- 核心：（根据不同的课程分组）</span><br><span class="hljs-keyword">SELECT</span> SubjectName, <span class="hljs-built_in">AVG</span>(StudentResult) <span class="hljs-keyword">AS</span> 平均分, <span class="hljs-built_in">MAX</span>(StudentResult) <span class="hljs-keyword">AS</span> 最高分, <span class="hljs-built_in">MIN</span>(StudentResult) <span class="hljs-keyword">AS</span> 最低分<br><span class="hljs-keyword">FROM</span> <span class="hljs-keyword">result</span> r<br><span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> `subject` sub<br><span class="hljs-keyword">ON</span> r.`subjectno` <span class="hljs-operator">=</span> sub.`subjectno`<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> r.`subjectno`   <span class="hljs-comment">-- 通过什么字段来分组</span><br><span class="hljs-keyword">HAVING</span> 平均分 <span class="hljs-operator">&gt;</span> <span class="hljs-number">80</span><br></code></pre></td></tr></table></figure>

<h2 id="MySQL函数"><a href="#MySQL函数" class="headerlink" title="MySQL函数"></a>MySQL函数</h2><p>官网地址：<a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/func-op-summary-ref.html">https://dev.mysql.com/doc/refman/5.7/en/func-op-summary-ref.html</a></p>
<h3 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 数学运算</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">ABS</span>(<span class="hljs-number">-8</span>)  <span class="hljs-comment">-- 绝对值</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">CEILING</span>(<span class="hljs-number">1.1</span>) <span class="hljs-comment">-- 向上取整</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">FLOOR</span>(<span class="hljs-number">1.3</span>) <span class="hljs-comment">-- 向下取整</span><br><span class="hljs-keyword">SELECT</span> RAND() <span class="hljs-comment">-- 返回一个[0,1]之间的随机数</span><br><span class="hljs-keyword">SELECT</span> SIGN(<span class="hljs-number">-5</span>) <span class="hljs-comment">-- 判断符号 负数返回-1，正数返回1,0返回0</span><br><br><span class="hljs-comment">-- 字符串</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">CHAR_LENGTH</span>(<span class="hljs-string">&#x27;好&#x27;</span>) <span class="hljs-keyword">AS</span> len  <span class="hljs-comment">-- 字符串长度</span><br><span class="hljs-keyword">SELECT</span> CONCAT(<span class="hljs-string">&#x27;我爱&#x27;</span>,<span class="hljs-string">&#x27;Java&#x27;</span>) <span class="hljs-keyword">AS</span> str  <span class="hljs-comment">-- 拼接字符串</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">INSERT</span>(<span class="hljs-string">&#x27;I love code&#x27;</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;truly &#x27;</span>) <span class="hljs-comment">-- 插入，替换</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">LOWER</span>(<span class="hljs-string">&#x27;ABC&#x27;</span>)<br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">UPPER</span>(<span class="hljs-string">&#x27;abc&#x27;</span>)<br><span class="hljs-keyword">SELECT</span> INSTR(<span class="hljs-string">&#x27;kuang&#x27;</span>,<span class="hljs-string">&#x27;a&#x27;</span>) <span class="hljs-comment">-- 查找子串在字符串中的位置</span><br><span class="hljs-keyword">SELECT</span> REPLACE(<span class="hljs-string">&#x27;life&#x27;</span>,<span class="hljs-string">&#x27;f&#x27;</span>,<span class="hljs-string">&#x27;v&#x27;</span>)  <span class="hljs-comment">-- 替换所有的指定字符串</span><br><span class="hljs-keyword">SELECT</span> SUBSTR(<span class="hljs-string">&#x27;livvve&#x27;</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>) <span class="hljs-comment">-- 返回指定被截取子串</span><br><span class="hljs-keyword">SELECT</span> REVERSE(<span class="hljs-string">&#x27;hello&#x27;</span>) <span class="hljs-comment">-- 反转</span><br><br><span class="hljs-comment">-- 查询姓周的同学,将刘改为邹</span><br><span class="hljs-keyword">SELECT</span> REPLACE(studentname, <span class="hljs-string">&#x27;刘&#x27;</span>, <span class="hljs-string">&#x27;邹&#x27;</span>) <span class="hljs-keyword">FROM</span> student<br><span class="hljs-keyword">WHERE</span> studentname <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;刘%&#x27;</span><br><br><span class="hljs-comment">-- 时间和日期函数（记住）</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">CURRENT_DATE</span>() <span class="hljs-comment">-- 获取当前日期</span><br><span class="hljs-keyword">SELECT</span> CURDATE()<br><span class="hljs-keyword">SELECT</span> NOW()  <span class="hljs-comment">-- 获取当前时间</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">LOCALTIME</span>()  <span class="hljs-comment">-- 获取本地时间</span><br><span class="hljs-keyword">SELECT</span> SYSDATE()  <span class="hljs-comment">-- 获取系统时间</span><br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">YEAR</span>(NOW());<br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">MONTH</span>(NOW());<br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DAY</span>(NOW());<br><span class="hljs-keyword">SELECT</span>  <span class="hljs-keyword">HOUR</span>(NOW());<br><span class="hljs-keyword">SELECT</span>  <span class="hljs-keyword">MINUTE</span>(NOW());<br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">SECOND</span>(NOW())<br><br><span class="hljs-comment">-- 系统</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">SYSTEM_USER</span>()<br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">USER</span>()<br><span class="hljs-keyword">SELECT</span> VERSION()<br></code></pre></td></tr></table></figure>



<h3 id="聚合函数（更常用）"><a href="#聚合函数（更常用）" class="headerlink" title="聚合函数（更常用）"></a>聚合函数（更常用）</h3><table>
<thead>
<tr>
<th>函数名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>COUNT()</td>
<td></td>
</tr>
<tr>
<td>SUM()</td>
<td></td>
</tr>
<tr>
<td>AVG()</td>
<td></td>
</tr>
<tr>
<td>MAX()</td>
<td></td>
</tr>
<tr>
<td>MIN()</td>
<td></td>
</tr>
<tr>
<td>…</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 聚合函数</span><br><span class="hljs-comment">-- 都能统计表中的数据</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(studentname) <span class="hljs-keyword">FROM</span> student;  <span class="hljs-comment">-- Count(字段)，会忽略所有的null值</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> student;   <span class="hljs-comment">-- Count(*)，不会忽略null值，本质计算行数</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">result</span>;    <span class="hljs-comment">-- Count(1)，不会忽略null值，本质计算行数，但只会检查一列</span><br><br></code></pre></td></tr></table></figure>

<h3 id="数据库级别的MD5加密"><a href="#数据库级别的MD5加密" class="headerlink" title="数据库级别的MD5加密"></a>数据库级别的MD5加密</h3><p>MD5：主要增强算法的复杂度和不可逆性。</p>
<p>MD5不可逆，具体的值md5是一样的</p>
<p>MD5破解网站的原理：背后有一个字典，MD5加密后的值 对比 加密前的值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 测试MD5 加密</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `testmd5`(<br>	`id` <span class="hljs-type">INT</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>	`name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>	`pwd` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>	<span class="hljs-keyword">PRIMARY</span> KEY(`id`)<br>)ENGINE<span class="hljs-operator">=</span>INNODB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8<br><br><span class="hljs-comment">-- 明文密码</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `testmd5` <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;zhangsan&#x27;</span>, <span class="hljs-string">&#x27;123456&#x27;</span>),<br>(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;lisi&#x27;</span>, <span class="hljs-string">&#x27;134567&#x27;</span>),<br>(<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;wangwu&#x27;</span>, <span class="hljs-string">&#x27;134567&#x27;</span>);<br><br><span class="hljs-comment">-- 加密</span><br><span class="hljs-keyword">UPDATE</span> testmd5 <span class="hljs-keyword">SET</span> pwd<span class="hljs-operator">=</span>MD5(pwd);<br><br><span class="hljs-comment">-- 插入的时候加密</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> testmd5 <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;xiaoming&#x27;</span>, MD5(<span class="hljs-string">&#x27;123456&#x27;</span>));<br><br><span class="hljs-comment">-- 校验:将用户传递进来的密码进行md5加密，比对加密后的值</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> testmd5 <span class="hljs-keyword">WHERE</span> `name`<span class="hljs-operator">=</span><span class="hljs-string">&#x27;xiaoming&#x27;</span> <span class="hljs-keyword">AND</span> pwd <span class="hljs-operator">=</span> MD5(<span class="hljs-string">&#x27;123456&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>核心：将一组SQL放在一个批次中去执行</p>
<blockquote>
<p>事务的原则：ACID原则</p>
<p>原子性，一致性，隔离性，持久性  （脏读，幻读…）</p>
<p>详细介绍链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/dengjili/article/details/82468576">https://blog.csdn.net/dengjili/article/details/82468576</a></p>
</blockquote>
<h3 id="原子性（Atomicity）"><a href="#原子性（Atomicity）" class="headerlink" title="原子性（Atomicity）"></a>原子性（Atomicity）</h3><p>要么成功，要么失败</p>
<ol>
<li>SQL执行  A 给 B 转账  A 1000 -&gt;200 B 200</li>
<li>SQL执行  B 收到 A 的钱  A  800  B 400</li>
</ol>
<h3 id="一致性（Consistency）"><a href="#一致性（Consistency）" class="headerlink" title="一致性（Consistency）"></a>一致性（Consistency）</h3><p>事务前后的数据完整性保持一致，比如最终一致性，A和B的总钱数不会变化，始终为1200</p>
<h3 id="隔离性（Isolation）"><a href="#隔离性（Isolation）" class="headerlink" title="隔离性（Isolation）"></a>隔离性（Isolation）</h3><p>多个用户并发访问数据库时，数据库为每一个用户开启的事务，不会被其他事务的操作数据所干扰，多个并发事务之间要相互隔离。</p>
<blockquote>
<p>隔离所导致的一些问题：</p>
</blockquote>
<ul>
<li><p>脏读：</p>
<p>  指一个事务读取了另外一个事物未提交的数据。</p>
</li>
<li><p>不可重复读：</p>
<p>  在一个事务内读取表中的某一行数据，多次读取的结果不同。</p>
</li>
<li><p>虚读（幻读）：</p>
<p>  在一个事务内读取到了别的事务插入的数据，导致前后读取不一致。</p>
</li>
</ul>
<h3 id="持久性（Durability）"><a href="#持久性（Durability）" class="headerlink" title="持久性（Durability）"></a>持久性（Durability）</h3><p>– 事务提交</p>
<p>事务一旦提交则不可逆，被持久化到数据库中</p>
<blockquote>
<p>执行事务</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- MySQL默认开启事务自动提交</span><br><span class="hljs-keyword">SET</span> autocommit <span class="hljs-operator">=</span> <span class="hljs-number">0</span>  <span class="hljs-comment">-- 关闭</span><br><span class="hljs-keyword">SET</span> autocommit <span class="hljs-operator">=</span> <span class="hljs-number">1</span>  <span class="hljs-comment">-- 开启</span><br><br><span class="hljs-comment">-- 手动处理事务</span><br><span class="hljs-keyword">SET</span> autocommit <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">-- 关闭自动提交</span><br><br><span class="hljs-comment">-- 事务开启</span><br><span class="hljs-keyword">START</span> TRANSACTION  <span class="hljs-comment">-- 标记一个事务的开始，从这之后的sql 都在同一个事务内</span><br><br><span class="hljs-comment">-- 提交： 持久化(成功）</span><br><span class="hljs-keyword">COMMIT</span><br><span class="hljs-comment">-- 回滚： 回到原来的样子（失败）</span><br><span class="hljs-keyword">ROLLBACK</span><br><span class="hljs-comment">-- 事务结束</span><br><span class="hljs-keyword">SET</span> autocommit <span class="hljs-operator">=</span> <span class="hljs-number">1</span>  <span class="hljs-comment">-- 开启自动提交</span><br><br><span class="hljs-keyword">SAVEPOINT</span> 保存点名 <span class="hljs-comment">-- 设置一个事务的保存点</span><br><span class="hljs-keyword">ROLLBACK</span> <span class="hljs-keyword">TO</span> <span class="hljs-keyword">SAVEPOINT</span> 保存点名  <span class="hljs-comment">-- 回滚到保存点</span><br><span class="hljs-keyword">RELEASE</span> <span class="hljs-keyword">SAVEPOINT</span> 保存点名    <span class="hljs-comment">-- 撤销保存点</span><br></code></pre></td></tr></table></figure>

<p><img src="/2023/01/10/MySQL/image-20201001133509760.png" srcset="/img/loading.gif" lazyload alt="image-20201001133509760"></p>
<p>转账实例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- ===============================</span><br><span class="hljs-comment">-- 转账</span><br><span class="hljs-keyword">CREATE</span> DATABASE shop <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8 <span class="hljs-keyword">COLLATE</span> utf8_general_ci<br>USE shop<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `account`(<br>	`id` <span class="hljs-type">INT</span>(<span class="hljs-number">3</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>	`name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>	`money` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">9</span>, <span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,   <span class="hljs-comment">-- 9位数，其中小数点两位</span><br>	<span class="hljs-keyword">PRIMARY</span> KEY (`id`) <br>)ENGINE<span class="hljs-operator">=</span>INNODB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `account`(`name`, `money`)<br><span class="hljs-keyword">VALUES</span><br>(<span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-number">2000.00</span>),<br>(<span class="hljs-string">&#x27;B&#x27;</span>, <span class="hljs-number">10000.00</span>)<br><br><span class="hljs-comment">-- 模拟转账: 事务</span><br><span class="hljs-keyword">SET</span> autocommit <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;   <span class="hljs-comment">-- 关闭自动提交</span><br><span class="hljs-keyword">START</span> TRANSACTION; <span class="hljs-comment">-- 开启事务;</span><br><span class="hljs-keyword">UPDATE</span> account <span class="hljs-keyword">SET</span> money <span class="hljs-operator">=</span> money <span class="hljs-operator">-</span> <span class="hljs-number">500</span> <span class="hljs-keyword">WHERE</span> `name` <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;A&#x27;</span>;  <span class="hljs-comment">-- A减500</span><br><span class="hljs-keyword">UPDATE</span> account <span class="hljs-keyword">SET</span> money <span class="hljs-operator">=</span> money <span class="hljs-operator">+</span> <span class="hljs-number">500</span> <span class="hljs-keyword">WHERE</span> `name` <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;B&#x27;</span>;  <span class="hljs-comment">-- B加500</span><br><br><span class="hljs-keyword">COMMIT</span>;  <span class="hljs-comment">-- 提交事务</span><br><span class="hljs-keyword">ROLLBACK</span>;  <span class="hljs-comment">-- 回滚，一旦提交数据就被持久化而不能回滚了</span><br><br><span class="hljs-keyword">SET</span> autocommit <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;  <span class="hljs-comment">-- 恢复默认值</span><br><span class="hljs-comment">-- ========================</span><br></code></pre></td></tr></table></figure>

<p>在Java中的使用情况：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> Function&#123;<br>    <span class="hljs-keyword">try</span>()&#123;<br>        something;<br>        commit();<br>    &#125;<span class="hljs-keyword">catch</span>(Exception)&#123;<br>        rollback();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><p>详细介绍链接：<a target="_blank" rel="noopener" href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html">http://blog.codinglabs.org/articles/theory-of-mysql-index.html</a></p>
<blockquote>
<p>MySQL官方对索引的定义为：<strong>索引（Index）是帮助MySQL高效获取数据的数据结构</strong>。</p>
<p>提取句子主干，就可以得到索引的本质：索引是数据结构。</p>
</blockquote>
<h3 id="索引的分类"><a href="#索引的分类" class="headerlink" title="索引的分类"></a>索引的分类</h3><blockquote>
<p>在一个表中，主键索引只能有一个，唯一索引可以有多个</p>
</blockquote>
<ul>
<li>主键索引 PRIMARY KEY<ul>
<li>唯一的标识，主键不可重复，只能有一个列作为主键</li>
</ul>
</li>
<li>唯一索引 UNIQUE KEY<ul>
<li>避免重复的列出现，唯一索引可以重复，多个列都可以标识为唯一索引</li>
</ul>
</li>
<li>常规索引 KEY&#x2F;INDEX<ul>
<li>默认的，index，key关键字来设置</li>
</ul>
</li>
<li>全文索引 FullText<ul>
<li>在特定的数据库引擎下才有，如MyISAM</li>
<li>快速定位数据</li>
</ul>
</li>
</ul>
<p>基础语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 索引的使用</span><br><span class="hljs-comment">-- 1.在创建表的时候给字段增加索引</span><br><span class="hljs-comment">-- 2.创建完毕后增加索引</span><br><br><span class="hljs-comment">-- 显示所有索引信息</span><br><span class="hljs-keyword">SHOW</span> INDEX <span class="hljs-keyword">FROM</span> student<br><br><span class="hljs-comment">-- 增加一个索引(索引名，类名)</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> school.`student` <span class="hljs-keyword">ADD</span> FULLTEXT INDEX `studentname`(`studentname`)<br><br><span class="hljs-comment">-- 分析SQL执行的状况</span><br>EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> student; <span class="hljs-comment">-- 常规索引，非全文索引</span><br><br>EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> student <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">MATCH</span>(studentname) AGAINST(<span class="hljs-string">&#x27;刘&#x27;</span>);   <span class="hljs-comment">-- 全文索引</span><br></code></pre></td></tr></table></figure>

<h3 id="测试索引"><a href="#测试索引" class="headerlink" title="测试索引"></a>测试索引</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `app_user`(<br>	`id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) UNSIGNED <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>	`name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;用户昵称&#x27;</span>,<br>	`email` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;用户邮箱&#x27;</span>,<br>	`phone` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;手机号&#x27;</span>,<br>	`gender` TINYINT(<span class="hljs-number">4</span>) UNSIGNED <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;性别（0：男，1：女）&#x27;</span>,<br>	`password` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;密码&#x27;</span>,<br>	`age` TINYINT(<span class="hljs-number">4</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;年龄&#x27;</span>,<br>	`create_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>	`update_time` <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>	<span class="hljs-keyword">PRIMARY</span> KEY (`id`)<br>) ENGINE<span class="hljs-operator">=</span>INNODB CHARSET<span class="hljs-operator">=</span>utf8mb4  COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;app用户表&#x27;</span><br><br><span class="hljs-comment">-- 插入100万数据</span><br>DELIMITER $$ <span class="hljs-comment">-- 写函数之前必须要写，标志</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> `mock_data`()<br><span class="hljs-keyword">RETURNS</span> <span class="hljs-type">INT</span><br><span class="hljs-keyword">DETERMINISTIC</span><br><span class="hljs-keyword">BEGIN</span><br>	<span class="hljs-keyword">DECLARE</span> num <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1000000</span>;<br>	<span class="hljs-keyword">DECLARE</span> i <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>;<br>	<br>	WHILE i <span class="hljs-operator">&lt;</span> num DO<br>		<span class="hljs-comment">-- 插入语句</span><br>		<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> app_user(`name`, `email`, `phone`,`gender`, `password`, `age`)<br>		<span class="hljs-keyword">VALUES</span>(<br>		CONCAT(<span class="hljs-string">&#x27;用户&#x27;</span>, i),<br>		<span class="hljs-string">&#x27;54323456@qq.com&#x27;</span>, <br>		CONCAT(<span class="hljs-string">&#x27;18&#x27;</span>, <span class="hljs-built_in">FLOOR</span>(RAND() <span class="hljs-operator">*</span> ((<span class="hljs-number">999999999</span><span class="hljs-number">-100000000</span>) <span class="hljs-operator">+</span> <span class="hljs-number">100000000</span>)) ),<br>		<span class="hljs-built_in">FLOOR</span>(RAND() <span class="hljs-operator">*</span> <span class="hljs-number">2</span>),<br>		UUID(),<br>		<span class="hljs-built_in">FLOOR</span>(RAND() <span class="hljs-operator">*</span> <span class="hljs-number">100</span>)<br>		);<br>		<br>		<span class="hljs-keyword">SET</span> i <span class="hljs-operator">=</span> i <span class="hljs-operator">+</span> <span class="hljs-number">1</span>;<br>	<span class="hljs-keyword">END</span> WHILE;<br>	<span class="hljs-keyword">RETURN</span> i;<br><span class="hljs-keyword">END</span>;<br><span class="hljs-keyword">SELECT</span> mock_data();<br><br><span class="hljs-comment">-- 创建索引前</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> app_user <span class="hljs-keyword">WHERE</span> `name`<span class="hljs-operator">=</span><span class="hljs-string">&#x27;用户9999&#x27;</span>;  <span class="hljs-comment">-- 0.518sec</span><br><br><span class="hljs-comment">-- id _ 表名 _ 字段名</span><br><span class="hljs-comment">-- create index 索引名 on 表（字段）</span><br><span class="hljs-keyword">CREATE</span> INDEX id_app_user_name <span class="hljs-keyword">ON</span> app_user(`name`);<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> app_user <span class="hljs-keyword">WHERE</span> `name`<span class="hljs-operator">=</span><span class="hljs-string">&#x27;用户9999&#x27;</span>;  <span class="hljs-comment">-- 0.002 sec</span><br></code></pre></td></tr></table></figure>

<p>索引在小数据量的时候，用处不大，但是在大数据的时候，区别十分明显~</p>
<h3 id="索引原则"><a href="#索引原则" class="headerlink" title="索引原则"></a>索引原则</h3><ul>
<li>索引不是越多越好</li>
<li>不要对经常变动的数据加索引</li>
<li>小数据量的表不需要加索引</li>
<li>索引一般加在常用来查询的字段上（提高查询速度）</li>
</ul>
<blockquote>
<p>索引的数据结构</p>
</blockquote>
<p>Hash 类型的索引</p>
<p>Btree：INNODB的默认数据结构</p>
<h2 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h2><h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><blockquote>
<p>SQL yog 可视化管理</p>
</blockquote>
<p><img src="/2023/01/10/MySQL/image-20201001160431570.png" srcset="/img/loading.gif" lazyload alt="image-20201001160431570"></p>
<blockquote>
<p>SQL 命令操作</p>
</blockquote>
<p>用户表：mysql.user</p>
<p>本质：对这张表进行增删改查</p>
<p>详细命令链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/zy_1995/article/details/102708482">https://blog.csdn.net/zy_1995/article/details/102708482</a></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 创建用户</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> kuangshen IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;123456&#x27;</span><br><br><span class="hljs-comment">-- 修改密码</span><br><span class="hljs-comment">-- set password for kuangshen@localhost = password(&#x27;111111&#x27;)  旧版本</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;kuangshen&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;111111&#x27;</span><br><span class="hljs-keyword">SET</span> PASSWORD <span class="hljs-keyword">FOR</span> <span class="hljs-string">&#x27;kuangshen2&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;2222222&#x27;</span><br><br><span class="hljs-comment">-- 给用户重命名</span><br>RENAME <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;kuangshen&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;kuangshen2&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span><br><br><span class="hljs-comment">-- 给用户授权 ALL PRIVILEGES *.* 会授予除GRANT以外的所有权限, 要授予GRANT需加上WITH GRANT OPTION</span><br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> PRIVILEGES <span class="hljs-keyword">ON</span> <span class="hljs-operator">*</span>.<span class="hljs-operator">*</span> <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;kuangshen&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span><br><br><span class="hljs-comment">-- 删除用户</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;kuangshen&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span><br><br><span class="hljs-comment">-- 查询权限</span><br><span class="hljs-keyword">SHOW</span> GRANTS <span class="hljs-keyword">FOR</span> <span class="hljs-string">&#x27;kuangshen&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span>  <span class="hljs-comment">-- 查看指定用户的权限</span><br><span class="hljs-keyword">SHOW</span> GRANTS <span class="hljs-keyword">FOR</span> root<span class="hljs-variable">@localhost</span><br><br><span class="hljs-comment">-- 撤销权限 revoke 哪些权限 ，在哪个库撤销， 给谁撤销</span><br><span class="hljs-keyword">REVOKE</span> <span class="hljs-keyword">ALL</span> PRIVILEGES <span class="hljs-keyword">ON</span> <span class="hljs-operator">*</span>.<span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> kuangshen2<span class="hljs-variable">@localhost</span><br></code></pre></td></tr></table></figure>

<h3 id="MySQL备份"><a href="#MySQL备份" class="headerlink" title="MySQL备份"></a>MySQL备份</h3><ul>
<li>保证重要的数据不丢失</li>
<li>数据转移</li>
</ul>
<p>MySQL数据库备份的方式：</p>
<ul>
<li><p>直接拷贝物理文件…..&#x2F;data</p>
</li>
<li><p>在SQL yog可视化工具中手动导出</p>
<ul>
<li>在左栏右键选择导出转储，选择结构和数据，指定导出的位置</li>
<li>将文件直接拉入yog中即可使用</li>
</ul>
</li>
<li><p>使用命令行 mysqldump  在命令行中使用</p>
  <figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmd"># mysqldump -h主机 -u用户名 -p密码 数据库名 [表<span class="hljs-number">1</span> 表<span class="hljs-number">2</span> 表<span class="hljs-number">3</span> ...] &gt; 物理磁盘位置<br>mysqldump -hlocalhost -uroot -pxxxxxx school student &gt;D:/a.sql<br></code></pre></td></tr></table></figure>

<p>  导入方法：</p>
  <figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cmd"># 登录后使用source命令<br>mysql -uroot -pxxxxxx<br>source .sql文件位置<br></code></pre></td></tr></table></figure></li>
</ul>
<h2 id="规范数据设计"><a href="#规范数据设计" class="headerlink" title="规范数据设计"></a>规范数据设计</h2><h3 id="为什么需要设计？"><a href="#为什么需要设计？" class="headerlink" title="为什么需要设计？"></a>为什么需要设计？</h3><p>当数据库比较复杂的时候，就需要进行设计。</p>
<p>糟糕的数据库设计：</p>
<ul>
<li>数据冗余，浪费空间</li>
<li>数据库插入和删除都会很麻烦，异常（屏蔽使用物理外键）</li>
<li>程序性能差</li>
</ul>
<p>良好的数据库设计：</p>
<ul>
<li>节省内存空间</li>
<li>保证数据库的完整性</li>
<li>方便开发系统</li>
</ul>
<p><strong>软件开发中，关于数据库的设计</strong></p>
<ul>
<li>分析需求：分析业务和需要处理的数据库的需求</li>
<li>概要设计：设计关系图 E-R 图</li>
</ul>
<p><strong>设计数据库的步骤：（个人博客）</strong></p>
<ul>
<li>收集信息，分析需求<ul>
<li>用户表（用户登录注销，用户的个人信息，写博客，创建分类）</li>
<li>分类表（文章分类，谁创建的）</li>
<li>文章表（文章的信息）</li>
<li>评论表（评论）</li>
<li>友链表（友链信息）</li>
<li>自定义表（系统信息，某个关键的字或者一些主字段） key: value</li>
<li>说说表（发表心情  id  content  create_time）</li>
</ul>
</li>
<li>标识实体（把需求落地到每个字段）</li>
<li>标识实体之间的关系<ul>
<li>写博客 user -&gt; blog</li>
<li>创建分类 user -&gt; category</li>
<li>关注 user -&gt; user</li>
<li>友链 links</li>
<li>评论 user-user-blog</li>
</ul>
</li>
</ul>
<h3 id="三大范式"><a href="#三大范式" class="headerlink" title="三大范式"></a>三大范式</h3><p><strong>为什么需要数据规范化？</strong></p>
<p>可能出现的问题：</p>
<ul>
<li>信息重复</li>
<li>更新异常</li>
<li>插入异常<ul>
<li>无法正常显示信息</li>
</ul>
</li>
<li>删除异常<ul>
<li>丢失一些有效的信息</li>
</ul>
</li>
</ul>
<p>详细链接：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/wsg25/p/9615100.html">https://www.cnblogs.com/wsg25/p/9615100.html</a></p>
<h4 id="第一范式"><a href="#第一范式" class="headerlink" title="第一范式"></a>第一范式</h4><p>原子性：保证每一列不可再分</p>
<h4 id="第二范式"><a href="#第二范式" class="headerlink" title="第二范式"></a>第二范式</h4><p>前提：满足第一范式</p>
<p>每张表只描述一件事情</p>
<h4 id="第三范式"><a href="#第三范式" class="headerlink" title="第三范式"></a>第三范式</h4><p>前提：满足第一范式和第二范式</p>
<p>确保数据表中的每一列数据都和主键直接相关，而不能间接相关</p>
<p><strong>规范性和性能的问题</strong></p>
<p>关联查询的表不能超过三张表</p>
<ul>
<li>考虑商业化的需求和目标，（成本，用户体验）数据库的性能更加重要</li>
<li>规范性能的问题时，需要适当考虑规范性</li>
<li>故意给某些表增加一些冗余的字段（从多表查询变为单表查询）</li>
<li>故意增加一些计算列（从大数据量降低为小数据量查询：索引）</li>
</ul>
<h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><h3 id="数据库驱动"><a href="#数据库驱动" class="headerlink" title="数据库驱动"></a>数据库驱动</h3><p><img src="/2023/01/10/MySQL/image-20201002111118497.png" srcset="/img/loading.gif" lazyload alt="image-20201002111118497"></p>
<p>程序会通过数据库驱动，和数据库打交道。</p>
<h3 id="JDBC概念"><a href="#JDBC概念" class="headerlink" title="JDBC概念"></a>JDBC概念</h3><p>SUN公司为了简化开发人员的（对数据库统一）的操作，提供了一个（java操作数据库的）规范，称为JDBC。</p>
<p>这些规范的实现由具体的厂商去做。</p>
<p>对于开发人员，只需要操纵API即可。</p>
<p><img src="/2023/01/10/MySQL/image-20201002111425645.png" srcset="/img/loading.gif" lazyload alt="image-20201002111425645"></p>
<p>java.sql</p>
<p>javax.sql</p>
<p>还需要导入一个数据库驱动包</p>
<p>mysql-connector-java.jar</p>
<h3 id="第一个JDBC程序"><a href="#第一个JDBC程序" class="headerlink" title="第一个JDBC程序"></a>第一个JDBC程序</h3><blockquote>
<p>创建测试数据库</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE jdbcstudy <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8 <span class="hljs-keyword">COLLATE</span> utf8_general_ci;<br><br>USE jdbcstudy;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users(<br>	id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY,<br>	NAME <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">40</span>),<br>	PASSWORD <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">40</span>),<br>	email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">60</span>),<br>	birthday <span class="hljs-type">DATE</span><br>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> users(id, NAME, PASSWORD, email, birthday)<br><span class="hljs-keyword">VALUES</span><br>(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;zhansan&#x27;</span>, <span class="hljs-string">&#x27;123456&#x27;</span>, <span class="hljs-string">&#x27;zs@sina.com&#x27;</span>, <span class="hljs-string">&#x27;1980-12-04&#x27;</span>),<br>(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;lisi&#x27;</span>, <span class="hljs-string">&#x27;123456&#x27;</span>, <span class="hljs-string">&#x27;lisi@sina.com&#x27;</span>, <span class="hljs-string">&#x27;1981-12-04&#x27;</span>),<br>(<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;wangwu&#x27;</span>, <span class="hljs-string">&#x27;123456&#x27;</span>, <span class="hljs-string">&#x27;wangwu@sina.com&#x27;</span>, <span class="hljs-string">&#x27;1979-12-04&#x27;</span>);<br></code></pre></td></tr></table></figure>

<ol>
<li><p>创建一个普通项目</p>
</li>
<li><p>导入数据库驱动</p>
</li>
<li><p>编写测试代码</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.sql.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">jdbcFirstDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, SQLException &#123;<br>        <span class="hljs-comment">//1. 加载驱动</span><br>        Class.forName(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);  <span class="hljs-comment">//固定写法，加载驱动</span><br>        <span class="hljs-comment">//2. 用户信息和url</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&amp;serverTimezone=GMT&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;123456&quot;</span>;<br>        <span class="hljs-comment">//3. 连接成功，数据库对象 Connection 代表数据库</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, username, password);<br><br>        <span class="hljs-comment">//4. 执行SQL的对象</span><br>        <span class="hljs-type">Statement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.createStatement();<br><br>        <span class="hljs-comment">//5. 执行SQL的对象去执行SQL，可能存在结果，返回结果</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select * from users&quot;</span>;<br>        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> statement.executeQuery(sql);   <span class="hljs-comment">//返回结果集，封装了全部查询出来的结果</span><br><br>        <span class="hljs-keyword">while</span>(resultSet.next())&#123;<br>            System.out.println(<span class="hljs-string">&quot;id=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;id&quot;</span>));<br>            System.out.println(<span class="hljs-string">&quot;name=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;name&quot;</span>));<br>            System.out.println(<span class="hljs-string">&quot;password=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;password&quot;</span>));<br>            System.out.println(<span class="hljs-string">&quot;email=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;email&quot;</span>));<br>            System.out.println(<span class="hljs-string">&quot;birthday=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;birthday&quot;</span>));<br>            System.out.println(<span class="hljs-string">&quot;===========================&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">//6. 释放连接</span><br>        resultSet.close();<br>        statement.close();<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<p>步骤总结：</p>
<ol>
<li>加载驱动</li>
<li>连接数据库 DriverManager</li>
<li>获取执行SQL的对象 Statement</li>
<li>获取返回的结果集</li>
<li>释放连接</li>
</ol>
<blockquote>
<p>DriveManager</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">Class.forName(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);  <span class="hljs-comment">//固定写法，加载驱动</span><br><br><span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, username, password);<br><span class="hljs-comment">//connection 代表数据库</span><br><span class="hljs-comment">//数据库设置自动提交</span><br>connection.setAutoCommit();<br><span class="hljs-comment">//事务提交</span><br>connection.commit();<br><span class="hljs-comment">//事务回滚</span><br>connection.rollback();<br></code></pre></td></tr></table></figure>

<blockquote>
<p>url</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&amp;serverTimezone=GMT&quot;</span>;<br><span class="hljs-comment">//mysql --3306</span><br><span class="hljs-comment">//jdbc:mysql:(协议)/localhost:3306/数据库名?参数1&amp;参数2&amp;参数3...</span><br><br><span class="hljs-comment">//oracle --2521</span><br><span class="hljs-comment">//jdbc:oracle:thin:@localhost:1521:sid</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>Statement –执行SQL 的对象   PrepareStatement</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//编写sql</span><br><span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select * from users&quot;</span>;<br><br>statement.executeQuery(<span class="hljs-string">&quot;&quot;</span>);  <span class="hljs-comment">//查询操作，返回结果集</span><br>statement.execute(<span class="hljs-string">&quot;&quot;</span>);       <span class="hljs-comment">//执行任何sql</span><br>statement.executeUpdate(<span class="hljs-string">&quot;&quot;</span>); <span class="hljs-comment">//更新，插入，删除，返回受影响的行数</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>ResultSet查询的结果集：封装了所有的查询结果</p>
</blockquote>
<p>获取指定的数据类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">resultSet.getInt();<br>resultSet.getString();<br>resultSet.getDate();<br>resultSet.getObject();   <span class="hljs-comment">//不知道列的类型时使用</span><br>...<br></code></pre></td></tr></table></figure>

<p>遍历，指针</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">resultSet.beforeFirst();  <span class="hljs-comment">//移动到最前面</span><br>resultSet.afterLast();    <span class="hljs-comment">//移动到最后面</span><br>resultSet.next();         <span class="hljs-comment">//移动到下一个数据</span><br>resultSet.previous();    <span class="hljs-comment">//移动到前一行</span><br>resultSet.absolute(row);  <span class="hljs-comment">//移动到指定行</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>释放资源</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//释放连接</span><br>resultSet.close();<br>statement.close();<br>connection.close();<br></code></pre></td></tr></table></figure>

<h3 id="statement对象"><a href="#statement对象" class="headerlink" title="statement对象"></a>statement对象</h3><p>jdbc中的statement对象用于向数据库发送SQL语句，想完成数据库的增删改查，只需要通过这个对象向数据库发送增删改查语句即可。</p>
<p>Statement对象的executeUpdate方法，用于向数据库发送增删改的SQL语句，executeUpdate执行完后，将会返回一个整数（变化的行数）。</p>
<p>Statement.executeQuery方法用于向数据库发送查询语句，executeQuery方法返回查询结果的ResultSet对象。</p>
<blockquote>
<p>CRUD操作- create</p>
</blockquote>
<p>使用executeUpdate（String sql）方法完成数据添加操作：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Statement</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> connection.createStatement();<br><span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;insert into user(...) values(...)&quot;</span>;<br><span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> st.executeUpdate(sql);<br><span class="hljs-keyword">if</span>(num &gt; <span class="hljs-number">0</span>)&#123;<br>    System.out.println(<span class="hljs-string">&quot;插入成功！&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>CRUD操作- delete</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Statement</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> connection.createStatement();<br><span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;delete from user where id = 1&quot;</span>;<br><span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> st.executeUpdate(sql);<br><span class="hljs-keyword">if</span>(num &gt; <span class="hljs-number">0</span>)&#123;<br>    System.out.println(<span class="hljs-string">&quot;删除成功！&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>CRUD操作- update</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">...;<br><span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update user set name = &#x27;&#x27; where name = &#x27;&#x27; &quot;</span>;<br><span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> st.executeUpdate(sql);<br>...;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>CRUD操作- read</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">...;<br><span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select * from user where id = 1&quot;</span>;<br><span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> st.executeQuery(sql);<br><span class="hljs-keyword">while</span>(rs.next())&#123;<br>    ...;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p> 代码实现</p>
</blockquote>
<ol>
<li><p>提取工具类</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> utils;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.sql.*;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcUtils</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>    <span class="hljs-keyword">static</span>&#123;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//获取文件信息</span><br>            <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> JdbcUtils.class.getClassLoader().getResourceAsStream(<span class="hljs-string">&quot;db.properties&quot;</span>);<br>            <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>            properties.load(inputStream);<br><br>            driver = properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);<br>            url = properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);<br>            username = properties.getProperty(<span class="hljs-string">&quot;username&quot;</span>);<br>            password = properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br><br>            <span class="hljs-comment">//1. 驱动只用加载一次</span><br>            Class.forName(driver);<br><br>        &#125;<span class="hljs-keyword">catch</span> (IOException e)&#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//获取连接</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-keyword">return</span> DriverManager.getConnection(url, username, password);<br>    &#125;<br>    <span class="hljs-comment">//释放连接资源</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">release</span><span class="hljs-params">(Connection connection, Statement statement, ResultSet resultSet)</span>&#123;<br>        <span class="hljs-keyword">if</span>(resultSet != <span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                resultSet.close();<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>                throwables.printStackTrace();<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(statement != <span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                statement.close();<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>                throwables.printStackTrace();<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(connection != <span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                connection.close();<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>                throwables.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p> db.properties文件：</p>
 <figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">driver</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br><span class="hljs-attr">url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&amp;serverTimezone=GMT</span><br><span class="hljs-attr">username</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">password</span>=<span class="hljs-string">123456</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>编写增删改查的方法</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//增删改</span><br><span class="hljs-keyword">import</span> utils.JdbcUtils;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestInsert</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">Statement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = JdbcUtils.getConnection();  <span class="hljs-comment">//获取数据库连接</span><br>            statement = connection.createStatement();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> SQL语句;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> statement.executeUpdate(sql);<br>            <span class="hljs-keyword">if</span>(i &gt; <span class="hljs-number">0</span>)&#123;<br>                System.out.println(<span class="hljs-string">&quot;success!&quot;</span>);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException sqlException) &#123;<br>            sqlException.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            JdbcUtils.release(connection, statement, resultSet);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//查询</span><br><span class="hljs-keyword">import</span> utils.JdbcUtils;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestInsert</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">Statement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = JdbcUtils.getConnection();  <span class="hljs-comment">//获取数据库连接</span><br>            statement = connection.createStatement();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select * from users&quot;</span>;<br>            resultSet = statement.executeQuery(sql);<br>            <span class="hljs-keyword">if</span>(resultSet != <span class="hljs-literal">null</span>)&#123;<br>                <span class="hljs-keyword">while</span>(resultSet.next())&#123;<br>                    System.out.println(<span class="hljs-string">&quot;id=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;id&quot;</span>));<br>                    System.out.println(<span class="hljs-string">&quot;name=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;name&quot;</span>));<br>                    System.out.println(<span class="hljs-string">&quot;password=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;password&quot;</span>));<br>                    System.out.println(<span class="hljs-string">&quot;email=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;email&quot;</span>));<br>                    System.out.println(<span class="hljs-string">&quot;birthday=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;birthday&quot;</span>));<br>                    System.out.println(<span class="hljs-string">&quot;===========================&quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException sqlException) &#123;<br>            sqlException.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            JdbcUtils.release(connection, statement, resultSet);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<h3 id="SQL注入问题-sql-injection"><a href="#SQL注入问题-sql-injection" class="headerlink" title="SQL注入问题  (sql injection)"></a>SQL注入问题  (sql injection)</h3><p>sql存在漏洞，会被攻击导致数据泄露 <strong>SQL会拼接or</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">sql = <span class="hljs-string">&quot;select * from users where name =&#x27;&quot;</span> + username + <span class="hljs-string">&quot;&#x27; and password = &#x27;&quot;</span> + password + <span class="hljs-string">&quot;&#x27;&quot;</span>;<br><span class="hljs-comment">//此时如果username和password为：</span><br>username = <span class="hljs-string">&quot;&#x27; or &#x27;1=1&#x27;&quot;</span>;<br>password = <span class="hljs-string">&quot;&#x27; or &#x27;1=1&#x27;&quot;</span>;<br><span class="hljs-comment">//则表达式恒成立，用户的所有数据将被盗取</span><br></code></pre></td></tr></table></figure>

<h3 id="PreparedStatement对象"><a href="#PreparedStatement对象" class="headerlink" title="PreparedStatement对象"></a>PreparedStatement对象</h3><p>PreparedStatement 可以防止SQL注入，并且效率更高。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> utils.JdbcUtils;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.PreparedStatement;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestSelect1</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;shuwen&quot;</span>;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;123456&quot;</span>;<br>            connection = JdbcUtils.getConnection();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select * from users where name = ? and password = ?&quot;</span>;<br><br>            <span class="hljs-comment">//preparedStatement本质：把传递进来的参数当做字符，即用引号包裹，如果存在转义字符，如&#x27;，则直接忽略</span><br>            preparedStatement = connection.prepareStatement(sql);  <span class="hljs-comment">//预编译</span><br><br>            preparedStatement.setString(<span class="hljs-number">1</span>, username);<br>            preparedStatement.setString(<span class="hljs-number">2</span>, password);<br><br>            resultSet = preparedStatement.executeQuery();  <span class="hljs-comment">//执行</span><br><br>            <span class="hljs-keyword">if</span>(resultSet.next())&#123;<br>                System.out.println(resultSet.getString(<span class="hljs-string">&quot;name&quot;</span>));<br>            &#125;<br><br>        &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            JdbcUtils.release(connection, preparedStatement, resultSet);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="使用IDEA连接数据库"><a href="#使用IDEA连接数据库" class="headerlink" title="使用IDEA连接数据库"></a>使用IDEA连接数据库</h3><p>在右侧栏添加数据库</p>
<p><img src="/2023/01/10/MySQL/image-20201002173513965.png" srcset="/img/loading.gif" lazyload alt="image-20201002173513965"></p>
<p><img src="/2023/01/10/MySQL/image-20201002173726030.png" srcset="/img/loading.gif" lazyload alt="image-20201002173726030"></p>
<p><img src="/2023/01/10/MySQL/image-20201002173822608.png" srcset="/img/loading.gif" lazyload alt="image-20201002173822608"></p>
<p>连接成功后，可以选择数据库</p>
<p><img src="/2023/01/10/MySQL/image-20201002174038984.png" srcset="/img/loading.gif" lazyload alt="image-20201002174038984"></p>
<p><img src="/2023/01/10/MySQL/image-20201002174055364.png" srcset="/img/loading.gif" lazyload alt="image-20201002174055364"></p>
<p>如果连接失败，可以在设置-》驱动里面查看版本是否正确，或者类是否正确。</p>
<h3 id="JDBC处理事务"><a href="#JDBC处理事务" class="headerlink" title="JDBC处理事务"></a>JDBC处理事务</h3><p><strong>回顾</strong></p>
<p>要么都成功，要么都失败</p>
<blockquote>
<p>ACID原则</p>
</blockquote>
<p>原子性：要么全部完成，要么都不完成</p>
<p>一致性：总数不变</p>
<p>隔离性：多个进程互不干扰</p>
<p>持久性：一旦提交不可逆，持久化到数据库</p>
<p>隔离性的问题：</p>
<p>脏读：一个事务读取了另一个没有提交的事务</p>
<p>不可重复读：在同一个事务内，重复读取表中的数据，数据发生了改变</p>
<p>幻读：在一个事务内，读取到了别人插入的数据，导致前后读出来的结果不一致</p>
<br>

<p><strong>代码实现：</strong></p>
<ol>
<li>开启事务<code>connection.setAutoCommit(false);</code></li>
<li>一组业务执行完毕，提交事务</li>
<li>可以在catch语句中显式定义回滚语句，但默认会回滚</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> utils.JdbcUtils;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.PreparedStatement;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestTransaction</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = JdbcUtils.getConnection();<br>            <span class="hljs-comment">//关闭数据库的自动提交功能,自动回开启事务</span><br>            connection.setAutoCommit(<span class="hljs-literal">false</span>);  <span class="hljs-comment">//开启事务</span><br><br>            <span class="hljs-type">String</span> <span class="hljs-variable">sql1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update account set money = money - 100 where name = &#x27;A&#x27;&quot;</span>;<br>            preparedStatement = connection.prepareStatement(sql1);<br>            preparedStatement.execute();<br><br>            <span class="hljs-type">String</span> <span class="hljs-variable">sql2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update account set money = money + 100 where name = &#x27;B&#x27;&quot;</span>;<br>            preparedStatement = connection.prepareStatement(sql2);<br>            preparedStatement.execute();<br><br>            <span class="hljs-comment">//业务完毕，提交事务</span><br>            connection.commit();<br>            System.out.println(<span class="hljs-string">&quot;success!&quot;</span>);<br><br>        &#125; <span class="hljs-keyword">catch</span> (Exception throwables) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                connection.rollback();   <span class="hljs-comment">//如果失败则回滚事务</span><br>            &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-comment">//如果失败也会默认回滚</span><br>            throwables.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            JdbcUtils.release(connection, preparedStatement, resultSet);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="数据库连接池"><a href="#数据库连接池" class="headerlink" title="数据库连接池"></a>数据库连接池</h3><p>数据库连接–执行完毕–释放 </p>
<p>但是连接到释放会十分浪费系统资源</p>
<p><strong>池化技术：准备一些预先的资源，过来就连接预先准备好的</strong></p>
<p>最小连接数：10</p>
<p>最大连接数：100  业务最高承载上限</p>
<p>等待超时：100ms</p>
<p>编写连接池，实现一个接口  DataSource</p>
<blockquote>
<p>开源数据源实现（拿来即用）</p>
</blockquote>
<p>DBCP</p>
<p>C3P0</p>
<p>Druid：阿里巴巴</p>
<p>使用了这些数据库连接池之后，我们在项目开发中就不需要编写连接数据库的代码了。</p>
<blockquote>
<p>DBCP</p>
</blockquote>
<p>需要用到的jar包：</p>
<p>commons-dbcp,commons-pool</p>
<p>dbcpconfig.properties</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs pro"># 连接设置 这里面的名字，是DBCP数据源定义好的<br>driverClassName=com.mysql.cj.jdbc.Driver<br>url=jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&amp;serverTimezone=GMT<br>username=root<br>password=123456<br><br>#&lt;!-- 初始化连接 --&gt;<br>initialSize=10<br><br>#最大连接数量<br>maxActive=50<br><br>#&lt;!-- 最大空闲连接 --&gt;<br>maxIdle=20<br><br>#&lt;!-- 最小空闲连接 --&gt;<br>minIdle=5<br><br>#&lt;!-- 超时等待时间以毫秒为单位 6000毫秒/1000等于60秒 --&gt;<br>maxWait=60000<br><br><br>#JDBC驱动建立连接时附带的连接属性属性的格式必须为这样：[属性名=property;]<br>#注意：&quot;user&quot; 与 &quot;password&quot; 两个属性会被明确地传递，因此这里不需要包含他们。<br>connectionProperties=useUnicode=true;characterEncoding=utf8<br><br>#指定由连接池所创建的连接的自动提交（auto-commit）状态。<br>defaultAutoCommit=true<br><br>#driver default 指定由连接池所创建的连接的事务级别（TransactionIsolation）。<br>#可用值为下列之一：（详情可见javadoc。）NONE,READ_UNCOMMITTED, READ_COMMITTED, REPEATABLE_READ, SERIALIZABLE<br>defaultTransactionIsolation=READ_UNCOMMITTED<br></code></pre></td></tr></table></figure>

<p>JdbcUtils_DBCP.java 利用工厂模式创建数据库连接</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> utils;<br><br><span class="hljs-keyword">import</span> org.apache.commons.dbcp.BasicDataSourceFactory;<br><br><span class="hljs-keyword">import</span> javax.sql.DataSource;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.sql.*;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcUtils_DBCP</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>    <span class="hljs-keyword">static</span>&#123;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">//获取文件信息</span><br>            <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> JdbcUtils.class.getClassLoader().getResourceAsStream(<span class="hljs-string">&quot;dbcpconfig.properties&quot;</span>);<br>            <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>            properties.load(inputStream);<br><br>            <span class="hljs-comment">//创建数据源 工厂模式 --》 创建</span><br>            dataSource = BasicDataSourceFactory.createDataSource(properties);<br><br>        &#125;<span class="hljs-keyword">catch</span> (IOException e)&#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//获取连接</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-keyword">return</span> dataSource.getConnection();  <span class="hljs-comment">//从数据源中获取连接</span><br>    &#125;<br>    <span class="hljs-comment">//释放连接资源</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">release</span><span class="hljs-params">(Connection connection, Statement statement, ResultSet resultSet)</span>&#123;<br>        <span class="hljs-keyword">if</span>(resultSet != <span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                resultSet.close();<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>                throwables.printStackTrace();<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(statement != <span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                statement.close();<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>                throwables.printStackTrace();<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(connection != <span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                connection.close();<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException throwables) &#123;<br>                throwables.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>插入数据测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> utils.JdbcUtils;<br><span class="hljs-keyword">import</span> utils.JdbcUtils_DBCP;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDBCP</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">Statement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = JdbcUtils_DBCP.getConnection();  <span class="hljs-comment">//获取数据库连接</span><br><br>            statement = connection.createStatement();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select * from users&quot;</span>;<br>            resultSet = statement.executeQuery(sql);<br>            <span class="hljs-keyword">if</span>(resultSet != <span class="hljs-literal">null</span>)&#123;<br>                <span class="hljs-keyword">while</span>(resultSet.next())&#123;<br>                    System.out.println(<span class="hljs-string">&quot;id=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;id&quot;</span>));<br>                    System.out.println(<span class="hljs-string">&quot;name=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;name&quot;</span>));<br>                    System.out.println(<span class="hljs-string">&quot;password=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;password&quot;</span>));<br>                    System.out.println(<span class="hljs-string">&quot;email=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;email&quot;</span>));<br>                    System.out.println(<span class="hljs-string">&quot;birthday=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;birthday&quot;</span>));<br>                    System.out.println(<span class="hljs-string">&quot;===========================&quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException sqlException) &#123;<br>            sqlException.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            JdbcUtils_DBCP.release(connection, statement, resultSet);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>C3P0</p>
</blockquote>
<p>需要用到的jar包</p>
<p>c3p0, mchange-commons-java</p>
<blockquote>
<p>结论</p>
</blockquote>
<p>无论使用什么数据源，本质相同：DataSource接口不会变，方法就不会变</p>
<blockquote>
<p>Druid</p>
</blockquote>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Java/" class="category-chain-item">Java</a>
  
  

      </span>
    
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="category-chain-item">数据库</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Java/">#Java</a>
      
        <a href="/tags/SQL/">#SQL</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>MySQL</div>
      <div>http://example.com/2023/01/10/MySQL/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Chen Shuwen</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年1月10日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/01/10/OrangeOS-%E4%BB%8E0xaa55%E5%88%B0kernel/" title="Orange OS-从0xaa55到kernel">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Orange OS-从0xaa55到kernel</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/01/10/Linux%E8%84%8F%E7%89%9B%E6%BC%8F%E6%B4%9E/" title="Linux脏牛漏洞">
                        <span class="hidden-mobile">Linux脏牛漏洞</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
